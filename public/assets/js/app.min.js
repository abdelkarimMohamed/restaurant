/*
Template Name: HUD - Responsive Bootstrap 5 Admin Template
Version: 2.1.0
Author: Sean Ngu
Website: http://www.seantheme.com/hud/
	----------------------------
		APPS CONTENT TABLE
	----------------------------

	<!-- ======== GLOBAL SCRIPT SETTING ======== -->
  01. Global Variable
  02. Handle Scrollbar
  03. Handle Sidebar Menu
  04. Handle Sidebar Scroll Memory
  05. Handle Card Action
  06. Handle Tooltip & Popover Activation
  07. Handle Scroll to Top Button
  08. Handle hexToRgba
  09. Handle Scroll To
  10. Handle Toggle Class
  11. Handle Theme Panel
  12. Handle CSS Variable
  13. Application Controller
  14. Initialise
	
	<!-- ======== APPLICATION SETTING ======== -->
	Application Controller
*/



/* 01. Global Variable
------------------------------------------------ */
var app = {
	id: '#app',
	isMobile: ((/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) || window.innerWidth < 992),
	bootstrap: {
		tooltip: {
			attr: 'data-bs-toggle="tooltip"'
		},
		popover: {
			attr: 'data-bs-toggle="popover"'
		},
		modal: {
			attr: 'data-bs-toggle="modal"',
			dismissAttr: 'data-bs-dismiss="modal"',
			event: {
				hidden: 'hidden.bs.modal'
			}
		},
		nav: {
			class: 'nav',
			tabs: {
				class: 'nav-tabs',
				activeClass: 'active',
				itemClass: 'nav-item',
				itemLinkClass: 'nav-link'
			}
		}
	},
	header: {
		id: '#header',
		class: 'app-header',
		hasScrollClass: 'has-scroll'
	},
	sidebar: {
		id: '#sidebar',
		class: 'app-sidebar',
		scrollBar: {
			localStorage: 'appSidebarScrollPosition',
			dom: ''
		},
		menu: {
			class: 'menu',
			initAttr: 'data-init',
			animationTime: 0,
			itemClass: 'menu-item',
			itemLinkClass: 'menu-link',
			hasSubClass: 'has-sub',
			activeClass: 'active',
			expandingClass: 'expanding',
			expandClass: 'expand',
			submenu: {
				class: 'menu-submenu',
			}
		},
		mobile: {
			toggleAttr: 'data-toggle="app-sidebar-mobile"',
			dismissAttr: 'data-dismiss="app-sidebar-mobile"',
			toggledClass: 'app-sidebar-mobile-toggled',
			closedClass: 'app-sidebar-mobile-closed',
			backdrop: {
				class: 'app-sidebar-mobile-backdrop'
			}
		},
		minify: {
			toggleAttr: 'data-toggle="app-sidebar-minify"',
			toggledClass: 'app-sidebar-minified',
			cookieName: 'app-sidebar-minified'
		},
		floatSubmenu: {
			id: '#app-sidebar-float-submenu',
			dom: '',
			timeout: '',
			class: 'app-sidebar-float-submenu',
			container: {
				class: 'app-sidebar-float-submenu-container'
			},
			arrow: {
				id: '#app-sidebar-float-submenu-arrow',
				class: 'app-sidebar-float-submenu-arrow'
			},
			line: {
				id: '#app-sidebar-float-submenu-line',
				class: 'app-sidebar-float-submenu-line'
			},
			overflow: {
				class: 'overflow-scroll mh-100vh'
			}
		},
		search: {
			class: 'menu-search',
			toggleAttr: 'data-sidebar-search="true"',
			hideClass: 'd-none',
			foundClass: 'has-text'
		},
		transparent: {
			class: 'app-sidebar-transparent'
		}
	},
	topNav: {
		id: '#top-nav',
		class: 'app-top-nav',
		mobile: {
			toggleAttr: 'data-toggle="app-top-nav-mobile"'
		},
		menu: {
			class: 'menu',
			itemClass: 'menu-item',
			itemLinkClass: 'menu-link',
			activeClass: 'active',
			hasSubClass: 'has-sub',
			expandClass: 'expand',
			submenu: {
				class: 'menu-submenu'
			}
		},
		control: {
			class: 'menu-control',
			startClass: 'menu-control-start',
			endClass: 'menu-control-end',
			showClass: 'show',
			buttonPrev: {
				class: 'menu-control-start',
				toggleAttr: 'data-toggle="app-top-menu-prev"'
			},
			buttonNext: {
				class: 'menu-control-end',
				toggleAttr: 'data-toggle="app-top-menu-next"'
			}
		}
	},
	scrollBar: {
		attr: 'data-scrollbar="true"',
		skipMobileAttr: 'data-skip-mobile',
		heightAttr: 'data-height',
		wheelPropagationAttr: 'data-wheel-propagation'
	},
	content: {
		id: '#content',
		class: 'app-content',
		fullHeight: {
			class: 'app-content-full-height'
		},
		fullWidth: {
			class: 'app-content-full-width'
		}
	},
	layout: {
		sidebarLight: {
			class: 'app-with-light-sidebar'
		},
		sidebarEnd: {
			class: 'app-with-end-sidebar'
		},
		sidebarWide: {
			class: 'app-with-wide-sidebar'
		},
		sidebarMinified: {
			class: 'app-sidebar-minified'
		},
		sidebarTwo: {
			class: 'app-with-two-sidebar'
		},
		withoutHeader: {
			class: 'app-without-header'
		},
		withoutSidebar: {
			class: 'app-without-sidebar'
		},
		topMenu: {
			class: 'app-with-top-menu'
		},
		boxedLayout: {
			class: 'boxed-layout'
		}
	},
	scrollToTopBtn: {
		showClass: 'show',
		heightShow: 200,
		toggleAttr: 'data-toggle="scroll-to-top"',
		scrollSpeed: 500
	},
	scrollTo: {
		attr: 'data-toggle="scroll-to"',
		target: 'data-target',
		linkTarget: 'href'
	},
	themePanel: {
		class: 'app-theme-panel',
		toggleAttr: 'data-toggle="theme-panel-expand"',
		cookieName: 'app-theme-panel-expand',
		activeClass: 'active',
		themeListCLass: 'app-theme-list',
		themeListItemCLass: 'app-theme-list-item',
		themeCoverClass: 'app-theme-cover',
		themeCoverItemClass: 'app-theme-cover-item',
		theme: {
			toggleAttr: 'data-toggle="theme-selector"',
			classAttr: 'data-theme-class',
			cookieName: 'app-theme',
			activeClass: 'active'
		},
		themeCover: {
			toggleAttr: 'data-toggle="theme-cover-selector"',
			classAttr: 'data-theme-cover-class',
			cookieName: 'app-theme-cover',
			activeClass: 'active'
		},
		themeMode: {
			toggleAttr: 'data-toggle="theme-mode-selector"',
			valueAttr: 'data-theme-mode',
			cookieName: 'app-theme-mode',
			activeClass: 'active',
			attr: 'data-bs-theme'
		}
	},
	dismissClass: {
		toggleAttr: 'data-dismiss-class',
		targetAttr: 'data-dismiss-target'
	},
	toggleClass: {
		toggleAttr: 'data-toggle-class',
		targetAttr: 'data-toggle-target'
	},
	variablePrefix: 'bs-',
	variableFontList: ['body-font-family', 'body-font-size', 'body-font-weight', 'body-line-height'],
	variableColorList: [
		'theme', 'theme-rgb', 'theme-color', 'theme-color-rgb',
		'default', 'default-rgb',
		'primary', 'primary-rgb', 'primary-bg-subtle', 'primary-text', 'primary-border-subtle',
		'secondary', 'secondary-rgb', 'secondary-bg-subtle', 'secondary-text', 'secondary-border-subtle',
		'success', 'success-rgb', 'success-bg-subtle', 'success-text', 'success-border-subtle',
		'warning', 'warning-rgb', 'warning-bg-subtle', 'warning-text', 'warning-border-subtle',
		'info', 'info-rgb', 'info-bg-subtle', 'info-text', 'info-border-subtle',
		'danger', 'danger-rgb', 'danger-bg-subtle', 'danger-text', 'danger-border-subtle',
		'light', 'light-rgb', 'light-bg-subtle', 'light-text', 'light-border-subtle',
		'dark', 'dark-rgb', 'dark-bg-subtle', 'dark-text', 'dark-border-subtle',
		'inverse', 'inverse-rgb',
		'white', 'white-rgb',
		'black', 'black-rgb',
		'teal', 'teal-rgb',
		'indigo', 'indigo-rgb', 
		'purple', 'purple-rgb',
		'yellow', 'yellow-rgb',
		'pink', 'pink-rgb',
		'cyan', 'cyan-rgb',
		'gray-100', 'gray-200', 'gray-300', 'gray-400', 'gray-500',  'gray-600', 'gray-700', 'gray-800', 'gray-900', 
		'gray-100-rgb', 'gray-200-rgb', 'gray-300-rgb', 'gray-400-rgb', 'gray-500-rgb',  'gray-600-rgb', 'gray-700-rgb', 'gray-800-rgb', 'gray-900-rgb', 
		'muted', 'muted-rgb', 'emphasis-color', 'emphasis-color-rgb',
		'body-bg', 'body-bg-rgb', 'body-color', 'body-color-rgb',
		'heading-color', 
		'secondary-color', 'secondary-color-rgb', 'secondary-bg', 'secondary-bg-rgb',
		'tertiary-color', 'tertiary-color-rgb', 'tertiary-bg', 'tertiary-bg-rgb',
		'link-color', 'link-color-rgb', 'link-hover-color', 'link-hover-color-rgb', 
		'border-color', 'border-color-translucent'
	],
	font: {},
	color: {},
	card: {
		expand: {
			status: false,
			toggleAttr: 'data-toggle="card-expand"',
			toggleTitle: 'Expand / Compress',
			class: 'card-expand'
		}
	},
	init: {
		attr: 'data-init',
		class: 'app-init'
	},
	animation: {
		attr: 'data-animation',
		valueAttr: 'data-value',
		speed: 300,
		effect: 'swing'
	}
};



/* 02. Handle Scrollbar
------------------------------------------------ */
var handleScrollbar = function() {
	"use strict";
	var elms = document.querySelectorAll('['+ app.scrollBar.attr +']');
		
	for (var i = 0; i < elms.length; i++) {
		generateScrollbar(elms[i])
	}
};
var generateScrollbar = function(elm) {
  "use strict";
	
	if (elm.scrollbarInit || (app.isMobile && elm.getAttribute(app.scrollBar.skipMobileAttr))) {
		return;
	}
	var dataHeight = (!elm.getAttribute(app.scrollBar.heightAttr)) ? elm.offsetHeight : elm.getAttribute(app.scrollBar.heightAttr);
	
	elm.style.height = dataHeight;
	elm.scrollbarInit = true;
	
	if(app.isMobile) {
		elm.style.overflowX = 'scroll';
	} else {
		var dataWheelPropagation = (elm.getAttribute(app.scrollBar.wheelPropagationAttr)) ? elm.getAttribute(app.scrollBar.wheelPropagationAttr) : false;
		
		if (elm.closest('.'+ app.sidebar.class) && elm.closest('.'+ app.sidebar.class).length !== 0) {
			app.sidebar.scrollBar.dom = new PerfectScrollbar(elm, {
				wheelPropagation: dataWheelPropagation
			});
		} else {
			new PerfectScrollbar(elm, {
				wheelPropagation: dataWheelPropagation
			});
		}
	}
	elm.setAttribute(app.init.attr, true);
	elm.classList.remove('invisible');
};



/* 03. Handle Sidebar Menu
------------------------------------------------ */
var handleSidebarMenuToggle = function(menus) {
	menus.map(function(menu) {
		menu.onclick = function(e) {
			e.preventDefault();
			var target = this.nextElementSibling;
	
			menus.map(function(m) {
				var otherTarget = m.nextElementSibling;
				if (otherTarget !== target) {
					otherTarget.style.display = 'none';
					otherTarget.closest('.'+ app.sidebar.menu.itemClass).classList.remove(app.sidebar.menu.expandClass);
				}
			});
	
			var targetItemElm = target.closest('.'+ app.sidebar.menu.itemClass);

			if (targetItemElm.classList.contains(app.sidebar.menu.expandClass) || (targetItemElm.classList.contains(app.sidebar.menu.activeClass) && !target.style.display)) {
				targetItemElm.classList.remove(app.sidebar.menu.expandClass);
				target.style.display = 'none';
			} else {
				targetItemElm.classList.add(app.sidebar.menu.expandClass);
				target.style.display = 'block';
			}
		}
	});
};
var handleSidebarMenu = function() {
	"use strict";
	
	var menuBaseSelector = '.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass;
	var submenuBaseSelector = ' > .'+ app.sidebar.menu.submenu.class +' > .'+ app.sidebar.menu.itemClass + '.' + app.sidebar.menu.hasSubClass;
	
	// menu
	var menuLinkSelector =  menuBaseSelector + ' > .'+ app.sidebar.menu.itemLinkClass;
	var menus = [].slice.call(document.querySelectorAll(menuLinkSelector));
	handleSidebarMenuToggle(menus);
	
	// submenu lvl 1
	var submenuLvl1Selector = menuBaseSelector + submenuBaseSelector;
	var submenusLvl1 = [].slice.call(document.querySelectorAll(submenuLvl1Selector + ' > .' + app.sidebar.menu.itemLinkClass));
	handleSidebarMenuToggle(submenusLvl1);
	
	// submenu lvl 2
	var submenuLvl2Selector = menuBaseSelector + submenuBaseSelector + submenuBaseSelector;
	var submenusLvl2 = [].slice.call(document.querySelectorAll(submenuLvl2Selector + ' > .' + app.sidebar.menu.itemLinkClass));
	handleSidebarMenuToggle(submenusLvl2);
};



/* 04. Handle Sidebar Scroll Memory
------------------------------------------------ */
var handleSidebarScrollMemory = function() {
	if (!app.isMobile) {
		try {
			if (typeof(Storage) !== 'undefined' && typeof(localStorage) !== 'undefined') {
				var elm = document.querySelector('.'+ app.sidebar.class +' ['+ app.scrollBar.attr +']');
				
				if (elm) {
					elm.onscroll = function() {
						localStorage.setItem(app.sidebar.scrollBar.localStorage, this.scrollTop);
					}
					var defaultScroll = localStorage.getItem(app.sidebar.scrollBar.localStorage);
					if (defaultScroll) {
						document.querySelector('.'+ app.sidebar.class +' ['+ app.scrollBar.attr +']').scrollTop = defaultScroll;
					}
				}
			}
		} catch (error) {
			console.log(error);
		}
	}
};



/* 05. Handle Card Action
------------------------------------------------ */
var handleCardAction = function() {
	"use strict";

	if (app.card.expand.status) {
		return false;
	}
	app.card.expand.status = true;

	// expand
	var expandTogglerList = [].slice.call(document.querySelectorAll('['+ app.card.expand.toggleAttr +']'));
	var expandTogglerTooltipList = expandTogglerList.map(function (expandTogglerEl) {
		expandTogglerEl.onclick = function(e) {
			e.preventDefault();
		
			var target = this.closest('.card');
			var targetClass = app.card.expand.class;
			var targetTop = 40;

			if (document.body.classList.contains(targetClass) && target.classList.contains(targetClass)) {
				target.removeAttribute('style');
				target.classList.remove(targetClass);
				document.body.classList.remove(targetClass);
			} else {
				document.body.classList.add(targetClass);
				target.classList.add(targetClass);
			}
		
			window.dispatchEvent(new Event('resize'));
		};
	
		return new bootstrap.Tooltip(expandTogglerEl, {
			title: app.card.expand.toggleTitle,
			placement: 'bottom',
			trigger: 'hover',
			container: 'body'
		});
	});
};



/* 06. Handle Tooltip & Popover Activation
------------------------------------------------ */
var handelTooltipPopoverActivation = function() {
	"use strict";
	
	var tooltipTriggerList = [].slice.call(document.querySelectorAll('['+ app.bootstrap.tooltip.attr +']'))
	var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
		return new bootstrap.Tooltip(tooltipTriggerEl);
	});
	
	var popoverTriggerList = [].slice.call(document.querySelectorAll('['+ app.bootstrap.popover.attr +']'))
	var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
		return new bootstrap.Popover(popoverTriggerEl);
	});
};



/* 07. Handle Scroll to Top Button
------------------------------------------------ */
var handleScrollToTopButton = function() {
	"use strict";
	
	var elmTriggerList = [].slice.call(document.querySelectorAll('['+ app.scrollToTopBtn.toggleAttr +']'));
	
	document.onscroll = function() {
		var doc = document.documentElement;
		var totalScroll = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);
		var elmList = elmTriggerList.map(function(elm) {
			if (totalScroll >= app.scrollToTopBtn.heightShow) {
				if (!elm.classList.contains(app.scrollToTopBtn.showClass)) {
					elm.classList.add(app.scrollToTopBtn.showClass);
				}
			} else {
				elm.classList.remove(app.scrollToTopBtn.showClass);
			}
		});
		
		var elm = document.querySelectorAll(app.id)[0];
	
		if (totalScroll > 0) {
			elm.classList.add(app.header.hasScrollClass);
		} else {
			elm.classList.remove(app.header.hasScrollClass);
		}
	}
	
	var elmList = elmTriggerList.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			
			window.scrollTo({top: 0, behavior: 'smooth'});
		}
	});
};



/* 08. Handle hexToRgba
------------------------------------------------ */
var hexToRgba = function(hex, transparent = 1) {
	var c;
	if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
		c= hex.substring(1).split('');
		if(c.length== 3){
				c= [c[0], c[0], c[1], c[1], c[2], c[2]];
		}
		c= '0x'+c.join('');
		return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+ transparent +')';
	}
  throw new Error('Bad Hex');
};



/* 09. Handle Scroll To
------------------------------------------------ */
var handleScrollTo = function() {
	var elmTriggerList = [].slice.call(document.querySelectorAll('['+ app.scrollTo.attr +']'));
	var elmList = elmTriggerList.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
		
			var targetAttr = (elm.getAttribute(app.scrollTo.target)) ? this.getAttribute(app.scrollTo.target) : this.getAttribute(app.scrollTo.linkTarget);
			var targetElm = document.querySelectorAll(targetAttr)[0];
			var targetHeader = document.querySelectorAll(app.header.id)[0];
			var targetHeight = targetHeader.offsetHeight;
			if (targetElm) {
				var targetTop = targetElm.offsetTop - targetHeight - 24;
				window.scrollTo({top: targetTop, behavior: 'smooth'});
			}
		}
	});
};



/* 10. Handle Toggle Class
------------------------------------------------ */
var handleToggleClass = function() {
	var elmList = [].slice.call(document.querySelectorAll('['+ app.toggleClass.toggleAttr +']'));
	
	elmList.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			
			var targetToggleClass = this.getAttribute(app.toggleClass.toggleAttr);
			var targetDismissClass = this.getAttribute(app.dismissClass.toggleAttr);
			var targetToggleElm = document.querySelector(this.getAttribute(app.toggleClass.targetAttr));
		
			if (!targetDismissClass) {
				if (targetToggleElm.classList.contains(targetToggleClass)) {
					targetToggleElm.classList.remove(targetToggleClass);
				} else {
					targetToggleElm.classList.add(targetToggleClass);
				}
			} else {
				if (!targetToggleElm.classList.contains(targetToggleClass) && !targetToggleElm.classList.contains(targetDismissClass)) {
					if (targetToggleElm.classList.contains(targetToggleClass)) {
						targetToggleElm.classList.remove(targetToggleClass);
					} else {
						targetToggleElm.classList.add(targetToggleClass);
					}
				} else {
					if (targetToggleElm.classList.contains(targetToggleClass)) {
						targetToggleElm.classList.remove(targetToggleClass);
					} else {
						targetToggleElm.classList.add(targetToggleClass);
					}
					if (targetToggleElm.classList.contains(targetDismissClass)) {
						targetToggleElm.classList.remove(targetDismissClass);
					} else {
						targetToggleElm.classList.add(targetDismissClass);
					}
				}
			}
		}
	});
}



/* 11. Handle Theme Panel
------------------------------------------------ */
var handleThemePanel = function() {
	"use strict";
	
	// 12.1 Theme Panel - Toggle / Dismiss
	var elmList = [].slice.call(document.querySelectorAll('['+ app.themePanel.toggleAttr +']'));
	
	elmList.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			
			var targetContainer = document.querySelector('.'+ app.themePanel.class);
			var targetExpand = false;
		
			if (targetContainer.classList.contains(app.themePanel.activeClass)) {
				targetContainer.classList.remove(app.themePanel.activeClass);
			} else {
				targetContainer.classList.add(app.themePanel.activeClass);
				targetExpand = true;
			}
			if (Cookies) {
				Cookies.set(app.themePanel.cookieName, targetExpand);
			}
		}
	});
	
	// 12.2 Theme Panel - Page Load Cookies 
	if (Cookies) {
		var themePanelExpand = Cookies.get(app.themePanel.cookieName);
		
		if (themePanelExpand == 'true' || typeof themePanelExpand == 'undefined') {
			var elm = document.querySelector('['+ app.themePanel.toggleAttr +']');
			if (elm) {
				elm.click();
			}
		}
	}
	
	
	// 12.3 Theme Panel - Theme Selector
	var elmList = [].slice.call(document.querySelectorAll('.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']'));
	elmList.map(function(elm) {
		elm.onclick = function() {
			for (var x = 0; x < document.body.classList.length; x++) {
				var targetClass = document.body.classList[x];
				if (targetClass.search('theme-') > -1) {
					document.body.classList.remove(targetClass);
				}
			}
		
			var targetTheme = this.getAttribute(app.themePanel.theme.classAttr);
			var targetThemeList = [].slice.call(document.querySelectorAll('.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']'));
			
			if (targetTheme) {
				document.body.classList.add(targetTheme);
			}
			targetThemeList.map(function(targetElm) {
				if (targetElm.getAttribute(app.themePanel.theme.classAttr) != targetTheme) {
					targetElm.closest('.'+ app.themePanel.themeListItemCLass).classList.remove(app.themePanel.theme.activeClass);
				}
			});
			
			this.closest('.'+ app.themePanel.themeListItemCLass).classList.add(app.themePanel.theme.activeClass);
			
			if (Cookies) {
				Cookies.set(app.themePanel.theme.cookieName, targetTheme);
				app.color.theme = (getComputedStyle(document.body).getPropertyValue('--bs-theme')).trim();
				app.color.themeRgb = (getComputedStyle(document.body).getPropertyValue('--bs-theme-rgb')).trim();
				
				document.dispatchEvent(new Event('theme-reload'));
			}
		}
	});
	
	if (Cookies) {
		if (Cookies.get(app.themePanel.theme.cookieName)) {
			var targetElm = document.querySelector('.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']' + '['+ app.themePanel.theme.classAttr +'="'+ Cookies.get(app.themePanel.theme.cookieName) +'"]');
			
			if (targetElm) {
				targetElm.click();
			
				app.color.theme = (getComputedStyle(document.body).getPropertyValue('--bs-theme')).trim();
				app.color.themeRgb = (getComputedStyle(document.body).getPropertyValue('--bs-theme-rgb')).trim();
			
				document.dispatchEvent(new Event('theme-reload'));
			}
		}
	}
	
	
	// 12.4 Theme Panel - Background Selector
	var elmList = [].slice.call(document.querySelectorAll('.'+ app.themePanel.class +' ['+ app.themePanel.themeCover.toggleAttr +']'));
	elmList.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			
			var htmlElm = document.querySelector('html');
			var targetTheme = this.getAttribute(app.themePanel.themeCover.classAttr);
			for (var x = 0; x < document.documentElement.classList.length; x++) {
				var targetClass = document.documentElement.classList[x];
				if (targetClass.search('bg-cover-') > -1) {
					htmlElm.classList.remove(targetClass);
				}
			}
			
			if (targetTheme) {
				htmlElm.classList.add(targetTheme);
			}
			
			var targetCoverList = [].slice.call(document.querySelectorAll('.'+ app.themePanel.class +' ['+ app.themePanel.themeCover.toggleAttr +']'));
			targetCoverList.map(function(targetElm) {
				if (targetElm.getAttribute(app.themePanel.themeCover.toggleAttr) != targetTheme) {
					targetElm.closest('.'+ app.themePanel.themeCoverItemClass).classList.remove(app.themePanel.themeCover.activeClass);
				}
			});
			
			this.closest('.'+ app.themePanel.themeCoverItemClass).classList.add(app.themePanel.themeCover.activeClass);
			if (Cookies) {
				Cookies.set(app.themePanel.themeCover.cookieName, targetTheme);
			}
		};
	});
	
	if (Cookies) {
		if (Cookies.get(app.themePanel.themeCover.cookieName)) {
			var targetElm = document.querySelector('.'+ app.themePanel.class +' ['+ app.themePanel.themeCover.toggleAttr +']' + '['+ app.themePanel.themeCover.classAttr +'="'+ Cookies.get(app.themePanel.themeCover.cookieName) +'"]');
			if (targetElm) {
				targetElm.click();
			}
		}
	}
	
	
	// 12.5 Theme Panel - Mode Selector
	var elms = [].slice.call(document.querySelectorAll('.'+ app.themePanel.class +' ['+ app.themePanel.themeMode.toggleAttr +']'));
	elms.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			
			var targetElm = this;
			var targetMode = (targetElm.getAttribute(app.themePanel.themeMode.valueAttr)) ? targetElm.getAttribute(app.themePanel.themeMode.valueAttr) : '';
		
			if (targetMode == 'dark') {
				document.querySelector('html').setAttribute(app.themePanel.themeMode.attr, targetMode);
			} else {
				document.querySelector('html').removeAttribute(app.themePanel.themeMode.attr);
			}
			if (Cookies) {
				Cookies.set(app.themePanel.themeMode.cookieName, targetMode);
			}
			targetElm.classList.add(app.themePanel.themeMode.activeClass);
			
			var elms2 = [].slice.call(document.querySelectorAll('.'+ app.themePanel.class +' ['+ app.themePanel.themeMode.toggleAttr +']'));
			elms2.map(function(elm2) {
				if (elm2 != targetElm) {
					elm2.classList.remove(app.themePanel.themeMode.activeClass);
				}
			});
			
			handleCssVariable();
			document.dispatchEvent(new CustomEvent('theme-reload'));
		}
	});
	
	if (Cookies) {
		if (Cookies.get(app.themePanel.themeMode.cookieName)) {
			var targetElm = document.querySelector('.'+ app.themePanel.class +' ['+ app.themePanel.themeMode.toggleAttr +']' + '['+ app.themePanel.themeMode.valueAttr +'="'+ Cookies.get(app.themePanel.themeMode.cookieName) +'"]');
			if (targetElm) {
				targetElm.click();
			}
		}
	}
};



/* 12. Handle CSS Variable
------------------------------------------------ */
var handleCssVariable = function() {
	var rootStyle = getComputedStyle(document.body);
	
	// font
	if (app.variableFontList && app.variablePrefix) {
		for (var i = 0; i < (app.variableFontList).length; i++) {
			app.font[app.variableFontList[i].replace(/-([a-z|0-9])/g, (match, letter) => letter.toUpperCase())] = rootStyle.getPropertyValue('--'+ app.variablePrefix + app.variableFontList[i]).trim();
		}
	}
	
	// color
	if (app.variableColorList && app.variablePrefix) {
		for (var i = 0; i < (app.variableColorList).length; i++) {
			app.color[app.variableColorList[i].replace(/-([a-z|0-9])/g, (match, letter) => letter.toUpperCase())] = rootStyle.getPropertyValue('--'+ app.variablePrefix + app.variableColorList[i]).trim();
		}
	}
};


/* 13. Handle Top Menu - Unlimited Top Menu Render
------------------------------------------------ */
var handleUnlimitedTopNavRender = function() {
	"use strict";
	// function handle menu button action - next / prev
	function handleMenuButtonAction(element, direction) {
		var obj = element.closest('.' + app.topNav.menu.class);
		var objStyle = window.getComputedStyle(obj);
		var bodyStyle = window.getComputedStyle(document.querySelector('body'));
		var targetCss = (bodyStyle.getPropertyValue('direction') == 'rtl') ? 'margin-right' : 'margin-left';
		var marginLeft = parseInt(objStyle.getPropertyValue(targetCss));  
		var containerWidth = document.querySelector('.'+ app.topNav.class).clientWidth - document.querySelector('.'+ app.topNav.class).clientHeight * 2;
		var totalWidth = 0;
		var finalScrollWidth = 0;
		var controlPrevObj = obj.querySelector('.menu-control-start');
		var controlPrevWidth = (controlPrevObj) ? controlPrevObj.clientWidth : 0;
		var controlNextObj = obj.querySelector('.menu-control-end');
		var controlNextWidth = (controlPrevObj) ? controlNextObj.clientWidth : 0;
		var controlWidth = controlPrevWidth + controlNextWidth;
		
		var elms = [].slice.call(obj.querySelectorAll('.' + app.topNav.menu.itemClass));
		if (elms) {
			elms.map(function(elm) {
				if (!elm.classList.contains(app.topNav.control.class)) {
					totalWidth += elm.clientWidth;
				}
			});
		}

		switch (direction) {
			case 'next':
				var widthLeft = totalWidth + marginLeft - containerWidth;
				if (widthLeft <= containerWidth) {
					finalScrollWidth = widthLeft - marginLeft - controlWidth;
					setTimeout(function() {
						obj.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonNext.class).classList.remove('show');
					}, app.animation.speed);
				} else {
					finalScrollWidth = containerWidth - marginLeft - controlWidth;
				}

				if (finalScrollWidth !== 0) {
					obj.style.transitionProperty = 'height, margin, padding';
					obj.style.transitionDuration = app.animation.speed + 'ms';
					if (bodyStyle.getPropertyValue('direction') != 'rtl') {
						obj.style.marginLeft = '-' + finalScrollWidth + 'px';
					} else {
						obj.style.marginRight = '-' + finalScrollWidth + 'px';
					}
					setTimeout(function() {
						obj.style.transitionProperty = '';
						obj.style.transitionDuration = '';
						obj.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonPrev.class).classList.add('show');
					}, app.animation.speed);
				}
				break;
			case 'prev':
				var widthLeft = -marginLeft;

				if (widthLeft <= containerWidth) {
					obj.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonPrev.class).classList.remove('show');
					finalScrollWidth = 0;
				} else {
					finalScrollWidth = widthLeft - containerWidth + controlWidth;
				}
				
				obj.style.transitionProperty = 'height, margin, padding';
				obj.style.transitionDuration = app.animation.speed + 'ms';
				
				if (bodyStyle.getPropertyValue('direction') != 'rtl') {
					obj.style.marginLeft = '-' + finalScrollWidth + 'px';
				} else {
					obj.style.marginRight = '-' + finalScrollWidth + 'px';
				}
				
				setTimeout(function() {
					obj.style.transitionProperty = '';
					obj.style.transitionDuration = '';
					obj.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonNext.class).classList.add('show');
				}, app.animation.speed);
				break;
		}
	}

	// handle page load active menu focus
	function handlePageLoadMenuFocus() {
		var targetMenu = document.querySelector('.'+ app.topNav.class +' .'+ app.topNav.menu.class);
		if (!targetMenu) {
			return;
		}
		var targetMenuStyle = window.getComputedStyle(targetMenu);
		var bodyStyle = window.getComputedStyle(document.body);
		var targetCss = (bodyStyle.getPropertyValue('direction') == 'rtl') ? 'margin-right' : 'margin-left';
		var marginLeft = parseInt(targetMenuStyle.getPropertyValue(targetCss));
		var viewWidth = document.querySelector('.'+ app.topNav.class +'').clientWidth;
		var prevWidth = 0;
		var speed = 0;
		var fullWidth = 0;
		var controlPrevObj = targetMenu.querySelector('.menu-control-start');
		var controlPrevWidth = (controlPrevObj) ? controlPrevObj.clientWidth : 0;
		var controlNextObj = targetMenu.querySelector('.menu-control-end');
		var controlNextWidth = (controlPrevObj) ? controlNextObj.clientWidth : 0;
		var controlWidth = 0;

		var elms = [].slice.call(document.querySelectorAll('.'+ app.topNav.class +' .'+ app.topNav.menu.class + ' > .'+ app.topNav.menu.itemClass +''));
		if (elms) {
			var found = false;
			elms.map(function(elm) {
				if (!elm.classList.contains('menu-control')) {
					fullWidth += elm.clientWidth;
					if (!found) {
						prevWidth += elm.clientWidth;
					}
					if (elm.classList.contains('active')) {
						found = true;
					}
				}
			});
		}
		
		var elm = targetMenu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonNext.class);
		if (prevWidth != fullWidth && fullWidth >= viewWidth) {
			elm.classList.add(app.topNav.control.showClass);
			controlWidth += controlNextWidth;
		} else {
			elm.classList.remove(app.topNav.control.showClass);
		}

		var elm = targetMenu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonPrev.class);
		if (prevWidth >= viewWidth && fullWidth >= viewWidth) {
			elm.classList.add(app.topNav.control.showClass);
		} else {
			elm.classList.remove(app.topNav.control.showClass);
		}
		
		if (prevWidth >= viewWidth) {
			var finalScrollWidth = prevWidth - viewWidth + controlWidth;
			if (bodyStyle.getPropertyValue('direction') != 'rtl') {
				targetMenu.style.marginLeft = '-' + finalScrollWidth + 'px';
			} else {
				targetMenu.style.marginRight = '-' + finalScrollWidth + 'px';
			}
		}
	}

	// handle menu next button click action
	var elm = document.querySelector('['+ app.topNav.control.buttonNext.toggleAttr +']');
	if (elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			handleMenuButtonAction(this,'next');
		};
	}
	
	// handle menu prev button click action
	var elm = document.querySelector('['+ app.topNav.control.buttonPrev.toggleAttr +']');
	if (elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			handleMenuButtonAction(this,'prev');
		};
	}

	// handle unlimited menu responsive setting
	window.addEventListener('resize', function() {
		var targetElm = document.querySelector('.'+ app.topNav.class +' .'+ app.topNav.menu.class);
		
		if (targetElm) {
			targetElm.removeAttribute('style');
		}
		if (document.body.clientWidth > 767) {
			handlePageLoadMenuFocus();
		}
	});

	handlePageLoadMenuFocus();
	
	function enableFluidContainerDrag(containerClassName) {
		const container = document.querySelector(containerClassName);
		if (!container) {
			return;
		}
		const menu = container.querySelector('.menu');
		const menuItem = menu.querySelectorAll('.menu-item:not(.menu-control)');

		let startX, scrollLeft, mouseDown;
		let menuWidth = 0;
		let maxScroll = 0;

		menuItem.forEach((element) => {
			menuWidth += element.offsetWidth;
		});

		container.addEventListener('mousedown', (e) => {
			mouseDown = true;
			startX = e.pageX;
			scrollLeft = parseInt(menu.style.marginLeft);
			maxScroll = window.innerWidth - menuWidth;
		});

		container.addEventListener('touchstart', (e) => {
			mouseDown = true;
			const touch = e.targetTouches[0];
			startX = touch.pageX;
			scrollLeft = parseInt(menu.style.marginLeft);
		});

		container.addEventListener('mouseup', () => {
			mouseDown = false;
		});

		container.addEventListener('touchend', () => {
			mouseDown = false;
		});

		container.addEventListener('mousemove', (e) => {
			if (!startX || !mouseDown) return;
			e.preventDefault();
			const x = e.pageX;
			const walkX = (x - startX) * 1;
			var totalMarginLeft = scrollLeft + walkX;
			if (totalMarginLeft > 0) {
				totalMarginLeft = 0;
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonPrev.class).classList.remove('show');
			} else {
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonPrev.class).classList.add('show');
			}
			if (totalMarginLeft <= maxScroll) {
				totalMarginLeft = maxScroll;
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonNext.class).classList.remove('show');
			} else {
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonNext.class).classList.add('show');
			}
			if (menuWidth < window.innerWidth) {
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonPrev.class).classList.remove('show');
			}
			if (maxScroll > 0) {
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonNext.class).classList.remove('show');
			}
			menu.style.marginLeft = totalMarginLeft + 'px';
		});

		container.addEventListener('touchmove', (e) => {
			if (!startX || !mouseDown) return;
			e.preventDefault();
			const touch = e.targetTouches[0];
			const x = touch.pageX;
			const walkX = (x - startX) * 1;
			var totalMarginLeft = scrollLeft + walkX;
			if (totalMarginLeft > 0) {
				totalMarginLeft = 0;
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonPrev.class).classList.remove('show');
			} else {
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonPrev.class).classList.add('show');
			}
			if (totalMarginLeft <= maxScroll) {
				totalMarginLeft = maxScroll;
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonNext.class).classList.remove('show');
			} else {
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonNext.class).classList.add('show');
			}
			if (menuWidth < window.innerWidth) {
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonPrev.class).classList.remove('show');
			}
			if (maxScroll > 0) {
				menu.querySelector('.'+ app.topNav.control.class +'.'+ app.topNav.control.buttonNext.class).classList.remove('show');
			}
			menu.style.marginLeft = totalMarginLeft + 'px';
		});

		document.addEventListener('mouseup', () => {
			mouseDown = false;
		});

		document.addEventListener('touchend', () => {
			mouseDown = false;
		});
	}

	enableFluidContainerDrag('.'+ app.topNav.class);

};


/* 14. Handle Top Nav - Sub Menu Toggle
------------------------------------------------ */
var handleTopNavToggle = function(menus, forMobile = false) {
	menus.map(function(menu) {
		menu.onclick = function(e) {
			e.preventDefault();
			
			if (!forMobile || (forMobile && document.body.clientWidth < 768)) {
				var target = this.nextElementSibling;
				menus.map(function(m) {
					var otherTarget = m.nextElementSibling;
					if (otherTarget !== target) {
						slideUp(otherTarget);
						otherTarget.closest('.'+ app.topNav.menu.itemClass).classList.remove(app.topNav.menu.expandClass);
						otherTarget.closest('.'+ app.topNav.menu.itemClass).classList.add(app.topNav.menu.closedClass);
					}
				});
			
				slideToggle(target);
			}
		}
	});
};
var handleTopNavSubMenu = function() {
	"use strict";
	
	var menuBaseSelector = '.'+ app.topNav.class +' .'+ app.topNav.menu.class +' > .'+ app.topNav.menu.itemClass +'.'+ app.topNav.menu.hasSubClass;
	var submenuBaseSelector = ' > .'+ app.topNav.menu.submenu.class +' > .'+ app.topNav.menu.itemClass + '.' + app.topNav.menu.hasSubClass;
	
	// 14.1 Menu - Toggle / Collapse
	var menuLinkSelector =  menuBaseSelector + ' > .'+ app.topNav.menu.itemLinkClass;
	var menus = [].slice.call(document.querySelectorAll(menuLinkSelector));
	handleTopNavToggle(menus, true);
	
	// 14.2 Menu - Submenu lvl 1
	var submenuLvl1Selector = menuBaseSelector + submenuBaseSelector;
	var submenusLvl1 = [].slice.call(document.querySelectorAll(submenuLvl1Selector + ' > .' + app.topNav.menu.itemLinkClass));
	handleTopNavToggle(submenusLvl1);
	
	// 14.3 submenu lvl 2
	var submenuLvl2Selector = menuBaseSelector + submenuBaseSelector + submenuBaseSelector;
	var submenusLvl2 = [].slice.call(document.querySelectorAll(submenuLvl2Selector + ' > .' + app.topNav.menu.itemLinkClass));
	handleTopNavToggle(submenusLvl2);
	
	window.addEventListener('resize', function() {
		var elms = [].slice.call(document.querySelectorAll('.'+ app.topNav.class + ' .'+ app.topNav.menu.submenu.class));
		elms.map(function(elm) {
			elm.removeAttribute('style');
		});
	});
};


/* 15. Handle Top Nav - Mobile Top Menu Toggle
------------------------------------------------ */
var handleTopNavMobileToggle = function() {
	"use strict";
	
	var elm = document.querySelector('['+ app.topNav.mobile.toggleAttr +']');
	if (elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			slideToggle(document.querySelector('.'+ app.topNav.class));
		}
	}
	
	window.addEventListener('resize', function() {
		var elm = document.querySelector('.'+ app.topNav.class);
		if (elm) {
			elm.removeAttribute('style');
		}
	});
};


/* 16. Animation - Slide Up
------------------------------------------------ */
var slideUp = function(elm, duration = app.animation.speed) {
	if (!elm.classList.contains('transitioning')) {
		elm.classList.add('transitioning');
		elm.style.transitionProperty = 'height, margin, padding';
		elm.style.transitionDuration = duration + 'ms';
		elm.style.boxSizing = 'border-box';
		elm.style.height = elm.offsetHeight + 'px';
		elm.offsetHeight;
		elm.style.overflow = 'hidden';
		elm.style.height = 0;
		elm.style.paddingTop = 0;
		elm.style.paddingBottom = 0;
		elm.style.marginTop = 0;
		elm.style.marginBottom = 0;
		window.setTimeout( () => {
			elm.style.display = 'none';
			elm.style.removeProperty('height');
			elm.style.removeProperty('padding-top');
			elm.style.removeProperty('padding-bottom');
			elm.style.removeProperty('margin-top');
			elm.style.removeProperty('margin-bottom');
			elm.style.removeProperty('overflow');
			elm.style.removeProperty('transition-duration');
			elm.style.removeProperty('transition-property');
			elm.classList.remove('transitioning');
		}, duration);
	}
};


/* 17. Animation - Slide Down
------------------------------------------------ */
var slideDown = function(elm, duration = app.animation.speed) {
	if (!elm.classList.contains('transitioning')) {
		elm.classList.add('transitioning');
		elm.style.removeProperty('display');
		let display = window.getComputedStyle(elm).display;
		if (display === 'none') display = 'block';
		elm.style.display = display;
		let height = elm.offsetHeight;
		elm.style.overflow = 'hidden';
		elm.style.height = 0;
		elm.style.paddingTop = 0;
		elm.style.paddingBottom = 0;
		elm.style.marginTop = 0;
		elm.style.marginBottom = 0;
		elm.offsetHeight;
		elm.style.boxSizing = 'border-box';
		elm.style.transitionProperty = "height, margin, padding";
		elm.style.transitionDuration = duration + 'ms';
		elm.style.height = height + 'px';
		elm.style.removeProperty('padding-top');
		elm.style.removeProperty('padding-bottom');
		elm.style.removeProperty('margin-top');
		elm.style.removeProperty('margin-bottom');
		window.setTimeout( () => {
			elm.style.removeProperty('height');
			elm.style.removeProperty('overflow');
			elm.style.removeProperty('transition-duration');
			elm.style.removeProperty('transition-property');
			elm.classList.remove('transitioning');
		}, duration);
	}
};


/* 18. Animation - Slide Toggle
------------------------------------------------ */
var slideToggle = function(elm, duration = app.animation.speed) {
	if (window.getComputedStyle(elm).display === 'none') {
		return slideDown(elm, duration);
	} else {
		return slideUp(elm, duration);
	}
};


/* 19. Application Controller
------------------------------------------------ */
var App = function () {
	"use strict";
	
	return {
		//main function
		init: function () {
			this.initComponent();
			this.initSidebar();
			this.initTopNav();
			this.initAppLoad();
		},
		initAppLoad: function() {
			document.querySelector('body').classList.add(app.init.class);
		},
		initSidebar: function() {
			handleSidebarMenu();
			handleSidebarScrollMemory();
		},
		initTopNav: function() {
			handleUnlimitedTopNavRender();
			handleTopNavSubMenu();
			handleTopNavMobileToggle();
		},
		initComponent: function() {
			handleScrollbar();
			handleScrollToTopButton();
			handleScrollTo();
			handleCardAction();
			handelTooltipPopoverActivation();
			handleToggleClass();
			handleThemePanel();
			handleCssVariable();
		},
		scrollTop: function() {
			window.scrollTo({top: 0, behavior: 'smooth'});
		}
	};
}();



/* 14. Initialise
------------------------------------------------ */
document.addEventListener('DOMContentLoaded', function() {
	App.init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcblRlbXBsYXRlIE5hbWU6IEhVRCAtIFJlc3BvbnNpdmUgQm9vdHN0cmFwIDUgQWRtaW4gVGVtcGxhdGVcblZlcnNpb246IDIuMS4wXG5BdXRob3I6IFNlYW4gTmd1XG5XZWJzaXRlOiBodHRwOi8vd3d3LnNlYW50aGVtZS5jb20vaHVkL1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0QVBQUyBDT05URU5UIFRBQkxFXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHQ8IS0tID09PT09PT09IEdMT0JBTCBTQ1JJUFQgU0VUVElORyA9PT09PT09PSAtLT5cbiAgMDEuIEdsb2JhbCBWYXJpYWJsZVxuICAwMi4gSGFuZGxlIFNjcm9sbGJhclxuICAwMy4gSGFuZGxlIFNpZGViYXIgTWVudVxuICAwNC4gSGFuZGxlIFNpZGViYXIgU2Nyb2xsIE1lbW9yeVxuICAwNS4gSGFuZGxlIENhcmQgQWN0aW9uXG4gIDA2LiBIYW5kbGUgVG9vbHRpcCAmIFBvcG92ZXIgQWN0aXZhdGlvblxuICAwNy4gSGFuZGxlIFNjcm9sbCB0byBUb3AgQnV0dG9uXG4gIDA4LiBIYW5kbGUgaGV4VG9SZ2JhXG4gIDA5LiBIYW5kbGUgU2Nyb2xsIFRvXG4gIDEwLiBIYW5kbGUgVG9nZ2xlIENsYXNzXG4gIDExLiBIYW5kbGUgVGhlbWUgUGFuZWxcbiAgMTIuIEhhbmRsZSBDU1MgVmFyaWFibGVcbiAgMTMuIEFwcGxpY2F0aW9uIENvbnRyb2xsZXJcbiAgMTQuIEluaXRpYWxpc2Vcblx0XG5cdDwhLS0gPT09PT09PT0gQVBQTElDQVRJT04gU0VUVElORyA9PT09PT09PSAtLT5cblx0QXBwbGljYXRpb24gQ29udHJvbGxlclxuKi9cblxuXG5cbi8qIDAxLiBHbG9iYWwgVmFyaWFibGVcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGFwcCA9IHtcblx0aWQ6ICcjYXBwJyxcblx0aXNNb2JpbGU6ICgoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB8fCB3aW5kb3cuaW5uZXJXaWR0aCA8IDk5MiksXG5cdGJvb3RzdHJhcDoge1xuXHRcdHRvb2x0aXA6IHtcblx0XHRcdGF0dHI6ICdkYXRhLWJzLXRvZ2dsZT1cInRvb2x0aXBcIidcblx0XHR9LFxuXHRcdHBvcG92ZXI6IHtcblx0XHRcdGF0dHI6ICdkYXRhLWJzLXRvZ2dsZT1cInBvcG92ZXJcIidcblx0XHR9LFxuXHRcdG1vZGFsOiB7XG5cdFx0XHRhdHRyOiAnZGF0YS1icy10b2dnbGU9XCJtb2RhbFwiJyxcblx0XHRcdGRpc21pc3NBdHRyOiAnZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIicsXG5cdFx0XHRldmVudDoge1xuXHRcdFx0XHRoaWRkZW46ICdoaWRkZW4uYnMubW9kYWwnXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRuYXY6IHtcblx0XHRcdGNsYXNzOiAnbmF2Jyxcblx0XHRcdHRhYnM6IHtcblx0XHRcdFx0Y2xhc3M6ICduYXYtdGFicycsXG5cdFx0XHRcdGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcblx0XHRcdFx0aXRlbUNsYXNzOiAnbmF2LWl0ZW0nLFxuXHRcdFx0XHRpdGVtTGlua0NsYXNzOiAnbmF2LWxpbmsnXG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRoZWFkZXI6IHtcblx0XHRpZDogJyNoZWFkZXInLFxuXHRcdGNsYXNzOiAnYXBwLWhlYWRlcicsXG5cdFx0aGFzU2Nyb2xsQ2xhc3M6ICdoYXMtc2Nyb2xsJ1xuXHR9LFxuXHRzaWRlYmFyOiB7XG5cdFx0aWQ6ICcjc2lkZWJhcicsXG5cdFx0Y2xhc3M6ICdhcHAtc2lkZWJhcicsXG5cdFx0c2Nyb2xsQmFyOiB7XG5cdFx0XHRsb2NhbFN0b3JhZ2U6ICdhcHBTaWRlYmFyU2Nyb2xsUG9zaXRpb24nLFxuXHRcdFx0ZG9tOiAnJ1xuXHRcdH0sXG5cdFx0bWVudToge1xuXHRcdFx0Y2xhc3M6ICdtZW51Jyxcblx0XHRcdGluaXRBdHRyOiAnZGF0YS1pbml0Jyxcblx0XHRcdGFuaW1hdGlvblRpbWU6IDAsXG5cdFx0XHRpdGVtQ2xhc3M6ICdtZW51LWl0ZW0nLFxuXHRcdFx0aXRlbUxpbmtDbGFzczogJ21lbnUtbGluaycsXG5cdFx0XHRoYXNTdWJDbGFzczogJ2hhcy1zdWInLFxuXHRcdFx0YWN0aXZlQ2xhc3M6ICdhY3RpdmUnLFxuXHRcdFx0ZXhwYW5kaW5nQ2xhc3M6ICdleHBhbmRpbmcnLFxuXHRcdFx0ZXhwYW5kQ2xhc3M6ICdleHBhbmQnLFxuXHRcdFx0c3VibWVudToge1xuXHRcdFx0XHRjbGFzczogJ21lbnUtc3VibWVudScsXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRtb2JpbGU6IHtcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC1zaWRlYmFyLW1vYmlsZVwiJyxcblx0XHRcdGRpc21pc3NBdHRyOiAnZGF0YS1kaXNtaXNzPVwiYXBwLXNpZGViYXItbW9iaWxlXCInLFxuXHRcdFx0dG9nZ2xlZENsYXNzOiAnYXBwLXNpZGViYXItbW9iaWxlLXRvZ2dsZWQnLFxuXHRcdFx0Y2xvc2VkQ2xhc3M6ICdhcHAtc2lkZWJhci1tb2JpbGUtY2xvc2VkJyxcblx0XHRcdGJhY2tkcm9wOiB7XG5cdFx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItbW9iaWxlLWJhY2tkcm9wJ1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0bWluaWZ5OiB7XG5cdFx0XHR0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJhcHAtc2lkZWJhci1taW5pZnlcIicsXG5cdFx0XHR0b2dnbGVkQ2xhc3M6ICdhcHAtc2lkZWJhci1taW5pZmllZCcsXG5cdFx0XHRjb29raWVOYW1lOiAnYXBwLXNpZGViYXItbWluaWZpZWQnXG5cdFx0fSxcblx0XHRmbG9hdFN1Ym1lbnU6IHtcblx0XHRcdGlkOiAnI2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUnLFxuXHRcdFx0ZG9tOiAnJyxcblx0XHRcdHRpbWVvdXQ6ICcnLFxuXHRcdFx0Y2xhc3M6ICdhcHAtc2lkZWJhci1mbG9hdC1zdWJtZW51Jyxcblx0XHRcdGNvbnRhaW5lcjoge1xuXHRcdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtY29udGFpbmVyJ1xuXHRcdFx0fSxcblx0XHRcdGFycm93OiB7XG5cdFx0XHRcdGlkOiAnI2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtYXJyb3cnLFxuXHRcdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtYXJyb3cnXG5cdFx0XHR9LFxuXHRcdFx0bGluZToge1xuXHRcdFx0XHRpZDogJyNhcHAtc2lkZWJhci1mbG9hdC1zdWJtZW51LWxpbmUnLFxuXHRcdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtbGluZSdcblx0XHRcdH0sXG5cdFx0XHRvdmVyZmxvdzoge1xuXHRcdFx0XHRjbGFzczogJ292ZXJmbG93LXNjcm9sbCBtaC0xMDB2aCdcblx0XHRcdH1cblx0XHR9LFxuXHRcdHNlYXJjaDoge1xuXHRcdFx0Y2xhc3M6ICdtZW51LXNlYXJjaCcsXG5cdFx0XHR0b2dnbGVBdHRyOiAnZGF0YS1zaWRlYmFyLXNlYXJjaD1cInRydWVcIicsXG5cdFx0XHRoaWRlQ2xhc3M6ICdkLW5vbmUnLFxuXHRcdFx0Zm91bmRDbGFzczogJ2hhcy10ZXh0J1xuXHRcdH0sXG5cdFx0dHJhbnNwYXJlbnQ6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItdHJhbnNwYXJlbnQnXG5cdFx0fVxuXHR9LFxuXHR0b3BOYXY6IHtcblx0XHRpZDogJyN0b3AtbmF2Jyxcblx0XHRjbGFzczogJ2FwcC10b3AtbmF2Jyxcblx0XHRtb2JpbGU6IHtcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC10b3AtbmF2LW1vYmlsZVwiJ1xuXHRcdH0sXG5cdFx0bWVudToge1xuXHRcdFx0Y2xhc3M6ICdtZW51Jyxcblx0XHRcdGl0ZW1DbGFzczogJ21lbnUtaXRlbScsXG5cdFx0XHRpdGVtTGlua0NsYXNzOiAnbWVudS1saW5rJyxcblx0XHRcdGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcblx0XHRcdGhhc1N1YkNsYXNzOiAnaGFzLXN1YicsXG5cdFx0XHRleHBhbmRDbGFzczogJ2V4cGFuZCcsXG5cdFx0XHRzdWJtZW51OiB7XG5cdFx0XHRcdGNsYXNzOiAnbWVudS1zdWJtZW51J1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Y29udHJvbDoge1xuXHRcdFx0Y2xhc3M6ICdtZW51LWNvbnRyb2wnLFxuXHRcdFx0c3RhcnRDbGFzczogJ21lbnUtY29udHJvbC1zdGFydCcsXG5cdFx0XHRlbmRDbGFzczogJ21lbnUtY29udHJvbC1lbmQnLFxuXHRcdFx0c2hvd0NsYXNzOiAnc2hvdycsXG5cdFx0XHRidXR0b25QcmV2OiB7XG5cdFx0XHRcdGNsYXNzOiAnbWVudS1jb250cm9sLXN0YXJ0Jyxcblx0XHRcdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwiYXBwLXRvcC1tZW51LXByZXZcIidcblx0XHRcdH0sXG5cdFx0XHRidXR0b25OZXh0OiB7XG5cdFx0XHRcdGNsYXNzOiAnbWVudS1jb250cm9sLWVuZCcsXG5cdFx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC10b3AtbWVudS1uZXh0XCInXG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRzY3JvbGxCYXI6IHtcblx0XHRhdHRyOiAnZGF0YS1zY3JvbGxiYXI9XCJ0cnVlXCInLFxuXHRcdHNraXBNb2JpbGVBdHRyOiAnZGF0YS1za2lwLW1vYmlsZScsXG5cdFx0aGVpZ2h0QXR0cjogJ2RhdGEtaGVpZ2h0Jyxcblx0XHR3aGVlbFByb3BhZ2F0aW9uQXR0cjogJ2RhdGEtd2hlZWwtcHJvcGFnYXRpb24nXG5cdH0sXG5cdGNvbnRlbnQ6IHtcblx0XHRpZDogJyNjb250ZW50Jyxcblx0XHRjbGFzczogJ2FwcC1jb250ZW50Jyxcblx0XHRmdWxsSGVpZ2h0OiB7XG5cdFx0XHRjbGFzczogJ2FwcC1jb250ZW50LWZ1bGwtaGVpZ2h0J1xuXHRcdH0sXG5cdFx0ZnVsbFdpZHRoOiB7XG5cdFx0XHRjbGFzczogJ2FwcC1jb250ZW50LWZ1bGwtd2lkdGgnXG5cdFx0fVxuXHR9LFxuXHRsYXlvdXQ6IHtcblx0XHRzaWRlYmFyTGlnaHQ6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXdpdGgtbGlnaHQtc2lkZWJhcidcblx0XHR9LFxuXHRcdHNpZGViYXJFbmQ6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXdpdGgtZW5kLXNpZGViYXInXG5cdFx0fSxcblx0XHRzaWRlYmFyV2lkZToge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aC13aWRlLXNpZGViYXInXG5cdFx0fSxcblx0XHRzaWRlYmFyTWluaWZpZWQ6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItbWluaWZpZWQnXG5cdFx0fSxcblx0XHRzaWRlYmFyVHdvOiB7XG5cdFx0XHRjbGFzczogJ2FwcC13aXRoLXR3by1zaWRlYmFyJ1xuXHRcdH0sXG5cdFx0d2l0aG91dEhlYWRlcjoge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aG91dC1oZWFkZXInXG5cdFx0fSxcblx0XHR3aXRob3V0U2lkZWJhcjoge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aG91dC1zaWRlYmFyJ1xuXHRcdH0sXG5cdFx0dG9wTWVudToge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aC10b3AtbWVudSdcblx0XHR9LFxuXHRcdGJveGVkTGF5b3V0OiB7XG5cdFx0XHRjbGFzczogJ2JveGVkLWxheW91dCdcblx0XHR9XG5cdH0sXG5cdHNjcm9sbFRvVG9wQnRuOiB7XG5cdFx0c2hvd0NsYXNzOiAnc2hvdycsXG5cdFx0aGVpZ2h0U2hvdzogMjAwLFxuXHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cInNjcm9sbC10by10b3BcIicsXG5cdFx0c2Nyb2xsU3BlZWQ6IDUwMFxuXHR9LFxuXHRzY3JvbGxUbzoge1xuXHRcdGF0dHI6ICdkYXRhLXRvZ2dsZT1cInNjcm9sbC10b1wiJyxcblx0XHR0YXJnZXQ6ICdkYXRhLXRhcmdldCcsXG5cdFx0bGlua1RhcmdldDogJ2hyZWYnXG5cdH0sXG5cdHRoZW1lUGFuZWw6IHtcblx0XHRjbGFzczogJ2FwcC10aGVtZS1wYW5lbCcsXG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwidGhlbWUtcGFuZWwtZXhwYW5kXCInLFxuXHRcdGNvb2tpZU5hbWU6ICdhcHAtdGhlbWUtcGFuZWwtZXhwYW5kJyxcblx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZScsXG5cdFx0dGhlbWVMaXN0Q0xhc3M6ICdhcHAtdGhlbWUtbGlzdCcsXG5cdFx0dGhlbWVMaXN0SXRlbUNMYXNzOiAnYXBwLXRoZW1lLWxpc3QtaXRlbScsXG5cdFx0dGhlbWVDb3ZlckNsYXNzOiAnYXBwLXRoZW1lLWNvdmVyJyxcblx0XHR0aGVtZUNvdmVySXRlbUNsYXNzOiAnYXBwLXRoZW1lLWNvdmVyLWl0ZW0nLFxuXHRcdHRoZW1lOiB7XG5cdFx0XHR0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJ0aGVtZS1zZWxlY3RvclwiJyxcblx0XHRcdGNsYXNzQXR0cjogJ2RhdGEtdGhlbWUtY2xhc3MnLFxuXHRcdFx0Y29va2llTmFtZTogJ2FwcC10aGVtZScsXG5cdFx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZSdcblx0XHR9LFxuXHRcdHRoZW1lQ292ZXI6IHtcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cInRoZW1lLWNvdmVyLXNlbGVjdG9yXCInLFxuXHRcdFx0Y2xhc3NBdHRyOiAnZGF0YS10aGVtZS1jb3Zlci1jbGFzcycsXG5cdFx0XHRjb29raWVOYW1lOiAnYXBwLXRoZW1lLWNvdmVyJyxcblx0XHRcdGFjdGl2ZUNsYXNzOiAnYWN0aXZlJ1xuXHRcdH0sXG5cdFx0dGhlbWVNb2RlOiB7XG5cdFx0XHR0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJ0aGVtZS1tb2RlLXNlbGVjdG9yXCInLFxuXHRcdFx0dmFsdWVBdHRyOiAnZGF0YS10aGVtZS1tb2RlJyxcblx0XHRcdGNvb2tpZU5hbWU6ICdhcHAtdGhlbWUtbW9kZScsXG5cdFx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZScsXG5cdFx0XHRhdHRyOiAnZGF0YS1icy10aGVtZSdcblx0XHR9XG5cdH0sXG5cdGRpc21pc3NDbGFzczoge1xuXHRcdHRvZ2dsZUF0dHI6ICdkYXRhLWRpc21pc3MtY2xhc3MnLFxuXHRcdHRhcmdldEF0dHI6ICdkYXRhLWRpc21pc3MtdGFyZ2V0J1xuXHR9LFxuXHR0b2dnbGVDbGFzczoge1xuXHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZS1jbGFzcycsXG5cdFx0dGFyZ2V0QXR0cjogJ2RhdGEtdG9nZ2xlLXRhcmdldCdcblx0fSxcblx0dmFyaWFibGVQcmVmaXg6ICdicy0nLFxuXHR2YXJpYWJsZUZvbnRMaXN0OiBbJ2JvZHktZm9udC1mYW1pbHknLCAnYm9keS1mb250LXNpemUnLCAnYm9keS1mb250LXdlaWdodCcsICdib2R5LWxpbmUtaGVpZ2h0J10sXG5cdHZhcmlhYmxlQ29sb3JMaXN0OiBbXG5cdFx0J3RoZW1lJywgJ3RoZW1lLXJnYicsICd0aGVtZS1jb2xvcicsICd0aGVtZS1jb2xvci1yZ2InLFxuXHRcdCdkZWZhdWx0JywgJ2RlZmF1bHQtcmdiJyxcblx0XHQncHJpbWFyeScsICdwcmltYXJ5LXJnYicsICdwcmltYXJ5LWJnLXN1YnRsZScsICdwcmltYXJ5LXRleHQnLCAncHJpbWFyeS1ib3JkZXItc3VidGxlJyxcblx0XHQnc2Vjb25kYXJ5JywgJ3NlY29uZGFyeS1yZ2InLCAnc2Vjb25kYXJ5LWJnLXN1YnRsZScsICdzZWNvbmRhcnktdGV4dCcsICdzZWNvbmRhcnktYm9yZGVyLXN1YnRsZScsXG5cdFx0J3N1Y2Nlc3MnLCAnc3VjY2Vzcy1yZ2InLCAnc3VjY2Vzcy1iZy1zdWJ0bGUnLCAnc3VjY2Vzcy10ZXh0JywgJ3N1Y2Nlc3MtYm9yZGVyLXN1YnRsZScsXG5cdFx0J3dhcm5pbmcnLCAnd2FybmluZy1yZ2InLCAnd2FybmluZy1iZy1zdWJ0bGUnLCAnd2FybmluZy10ZXh0JywgJ3dhcm5pbmctYm9yZGVyLXN1YnRsZScsXG5cdFx0J2luZm8nLCAnaW5mby1yZ2InLCAnaW5mby1iZy1zdWJ0bGUnLCAnaW5mby10ZXh0JywgJ2luZm8tYm9yZGVyLXN1YnRsZScsXG5cdFx0J2RhbmdlcicsICdkYW5nZXItcmdiJywgJ2Rhbmdlci1iZy1zdWJ0bGUnLCAnZGFuZ2VyLXRleHQnLCAnZGFuZ2VyLWJvcmRlci1zdWJ0bGUnLFxuXHRcdCdsaWdodCcsICdsaWdodC1yZ2InLCAnbGlnaHQtYmctc3VidGxlJywgJ2xpZ2h0LXRleHQnLCAnbGlnaHQtYm9yZGVyLXN1YnRsZScsXG5cdFx0J2RhcmsnLCAnZGFyay1yZ2InLCAnZGFyay1iZy1zdWJ0bGUnLCAnZGFyay10ZXh0JywgJ2RhcmstYm9yZGVyLXN1YnRsZScsXG5cdFx0J2ludmVyc2UnLCAnaW52ZXJzZS1yZ2InLFxuXHRcdCd3aGl0ZScsICd3aGl0ZS1yZ2InLFxuXHRcdCdibGFjaycsICdibGFjay1yZ2InLFxuXHRcdCd0ZWFsJywgJ3RlYWwtcmdiJyxcblx0XHQnaW5kaWdvJywgJ2luZGlnby1yZ2InLCBcblx0XHQncHVycGxlJywgJ3B1cnBsZS1yZ2InLFxuXHRcdCd5ZWxsb3cnLCAneWVsbG93LXJnYicsXG5cdFx0J3BpbmsnLCAncGluay1yZ2InLFxuXHRcdCdjeWFuJywgJ2N5YW4tcmdiJyxcblx0XHQnZ3JheS0xMDAnLCAnZ3JheS0yMDAnLCAnZ3JheS0zMDAnLCAnZ3JheS00MDAnLCAnZ3JheS01MDAnLCAgJ2dyYXktNjAwJywgJ2dyYXktNzAwJywgJ2dyYXktODAwJywgJ2dyYXktOTAwJywgXG5cdFx0J2dyYXktMTAwLXJnYicsICdncmF5LTIwMC1yZ2InLCAnZ3JheS0zMDAtcmdiJywgJ2dyYXktNDAwLXJnYicsICdncmF5LTUwMC1yZ2InLCAgJ2dyYXktNjAwLXJnYicsICdncmF5LTcwMC1yZ2InLCAnZ3JheS04MDAtcmdiJywgJ2dyYXktOTAwLXJnYicsIFxuXHRcdCdtdXRlZCcsICdtdXRlZC1yZ2InLCAnZW1waGFzaXMtY29sb3InLCAnZW1waGFzaXMtY29sb3ItcmdiJyxcblx0XHQnYm9keS1iZycsICdib2R5LWJnLXJnYicsICdib2R5LWNvbG9yJywgJ2JvZHktY29sb3ItcmdiJyxcblx0XHQnaGVhZGluZy1jb2xvcicsIFxuXHRcdCdzZWNvbmRhcnktY29sb3InLCAnc2Vjb25kYXJ5LWNvbG9yLXJnYicsICdzZWNvbmRhcnktYmcnLCAnc2Vjb25kYXJ5LWJnLXJnYicsXG5cdFx0J3RlcnRpYXJ5LWNvbG9yJywgJ3RlcnRpYXJ5LWNvbG9yLXJnYicsICd0ZXJ0aWFyeS1iZycsICd0ZXJ0aWFyeS1iZy1yZ2InLFxuXHRcdCdsaW5rLWNvbG9yJywgJ2xpbmstY29sb3ItcmdiJywgJ2xpbmstaG92ZXItY29sb3InLCAnbGluay1ob3Zlci1jb2xvci1yZ2InLCBcblx0XHQnYm9yZGVyLWNvbG9yJywgJ2JvcmRlci1jb2xvci10cmFuc2x1Y2VudCdcblx0XSxcblx0Zm9udDoge30sXG5cdGNvbG9yOiB7fSxcblx0Y2FyZDoge1xuXHRcdGV4cGFuZDoge1xuXHRcdFx0c3RhdHVzOiBmYWxzZSxcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImNhcmQtZXhwYW5kXCInLFxuXHRcdFx0dG9nZ2xlVGl0bGU6ICdFeHBhbmQgLyBDb21wcmVzcycsXG5cdFx0XHRjbGFzczogJ2NhcmQtZXhwYW5kJ1xuXHRcdH1cblx0fSxcblx0aW5pdDoge1xuXHRcdGF0dHI6ICdkYXRhLWluaXQnLFxuXHRcdGNsYXNzOiAnYXBwLWluaXQnXG5cdH0sXG5cdGFuaW1hdGlvbjoge1xuXHRcdGF0dHI6ICdkYXRhLWFuaW1hdGlvbicsXG5cdFx0dmFsdWVBdHRyOiAnZGF0YS12YWx1ZScsXG5cdFx0c3BlZWQ6IDMwMCxcblx0XHRlZmZlY3Q6ICdzd2luZydcblx0fVxufTtcblxuXG5cbi8qIDAyLiBIYW5kbGUgU2Nyb2xsYmFyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVTY3JvbGxiYXIgPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBlbG1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnWycrIGFwcC5zY3JvbGxCYXIuYXR0ciArJ10nKTtcblx0XHRcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbG1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0Z2VuZXJhdGVTY3JvbGxiYXIoZWxtc1tpXSlcblx0fVxufTtcbnZhciBnZW5lcmF0ZVNjcm9sbGJhciA9IGZ1bmN0aW9uKGVsbSkge1xuICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdGlmIChlbG0uc2Nyb2xsYmFySW5pdCB8fCAoYXBwLmlzTW9iaWxlICYmIGVsbS5nZXRBdHRyaWJ1dGUoYXBwLnNjcm9sbEJhci5za2lwTW9iaWxlQXR0cikpKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBkYXRhSGVpZ2h0ID0gKCFlbG0uZ2V0QXR0cmlidXRlKGFwcC5zY3JvbGxCYXIuaGVpZ2h0QXR0cikpID8gZWxtLm9mZnNldEhlaWdodCA6IGVsbS5nZXRBdHRyaWJ1dGUoYXBwLnNjcm9sbEJhci5oZWlnaHRBdHRyKTtcblx0XG5cdGVsbS5zdHlsZS5oZWlnaHQgPSBkYXRhSGVpZ2h0O1xuXHRlbG0uc2Nyb2xsYmFySW5pdCA9IHRydWU7XG5cdFxuXHRpZihhcHAuaXNNb2JpbGUpIHtcblx0XHRlbG0uc3R5bGUub3ZlcmZsb3dYID0gJ3Njcm9sbCc7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGRhdGFXaGVlbFByb3BhZ2F0aW9uID0gKGVsbS5nZXRBdHRyaWJ1dGUoYXBwLnNjcm9sbEJhci53aGVlbFByb3BhZ2F0aW9uQXR0cikpID8gZWxtLmdldEF0dHJpYnV0ZShhcHAuc2Nyb2xsQmFyLndoZWVsUHJvcGFnYXRpb25BdHRyKSA6IGZhbHNlO1xuXHRcdFxuXHRcdGlmIChlbG0uY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzKSAmJiBlbG0uY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzKS5sZW5ndGggIT09IDApIHtcblx0XHRcdGFwcC5zaWRlYmFyLnNjcm9sbEJhci5kb20gPSBuZXcgUGVyZmVjdFNjcm9sbGJhcihlbG0sIHtcblx0XHRcdFx0d2hlZWxQcm9wYWdhdGlvbjogZGF0YVdoZWVsUHJvcGFnYXRpb25cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuZXcgUGVyZmVjdFNjcm9sbGJhcihlbG0sIHtcblx0XHRcdFx0d2hlZWxQcm9wYWdhdGlvbjogZGF0YVdoZWVsUHJvcGFnYXRpb25cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRlbG0uc2V0QXR0cmlidXRlKGFwcC5pbml0LmF0dHIsIHRydWUpO1xuXHRlbG0uY2xhc3NMaXN0LnJlbW92ZSgnaW52aXNpYmxlJyk7XG59O1xuXG5cblxuLyogMDMuIEhhbmRsZSBTaWRlYmFyIE1lbnVcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVNpZGViYXJNZW51VG9nZ2xlID0gZnVuY3Rpb24obWVudXMpIHtcblx0bWVudXMubWFwKGZ1bmN0aW9uKG1lbnUpIHtcblx0XHRtZW51Lm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR2YXIgdGFyZ2V0ID0gdGhpcy5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdFxuXHRcdFx0bWVudXMubWFwKGZ1bmN0aW9uKG0pIHtcblx0XHRcdFx0dmFyIG90aGVyVGFyZ2V0ID0gbS5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdFx0XHRcdGlmIChvdGhlclRhcmdldCAhPT0gdGFyZ2V0KSB7XG5cdFx0XHRcdFx0b3RoZXJUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdFx0XHRvdGhlclRhcmdldC5jbG9zZXN0KCcuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MpLmNsYXNzTGlzdC5yZW1vdmUoYXBwLnNpZGViYXIubWVudS5leHBhbmRDbGFzcyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcblx0XHRcdHZhciB0YXJnZXRJdGVtRWxtID0gdGFyZ2V0LmNsb3Nlc3QoJy4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyk7XG5cblx0XHRcdGlmICh0YXJnZXRJdGVtRWxtLmNsYXNzTGlzdC5jb250YWlucyhhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKSB8fCAodGFyZ2V0SXRlbUVsbS5jbGFzc0xpc3QuY29udGFpbnMoYXBwLnNpZGViYXIubWVudS5hY3RpdmVDbGFzcykgJiYgIXRhcmdldC5zdHlsZS5kaXNwbGF5KSkge1xuXHRcdFx0XHR0YXJnZXRJdGVtRWxtLmNsYXNzTGlzdC5yZW1vdmUoYXBwLnNpZGViYXIubWVudS5leHBhbmRDbGFzcyk7XG5cdFx0XHRcdHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGFyZ2V0SXRlbUVsbS5jbGFzc0xpc3QuYWRkKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kQ2xhc3MpO1xuXHRcdFx0XHR0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn07XG52YXIgaGFuZGxlU2lkZWJhck1lbnUgPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgbWVudUJhc2VTZWxlY3RvciA9ICcuJysgYXBwLnNpZGViYXIuY2xhc3MgKycgLicrIGFwcC5zaWRlYmFyLm1lbnUuY2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MgKycuJysgYXBwLnNpZGViYXIubWVudS5oYXNTdWJDbGFzcztcblx0dmFyIHN1Ym1lbnVCYXNlU2VsZWN0b3IgPSAnID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuc3VibWVudS5jbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArICcuJyArIGFwcC5zaWRlYmFyLm1lbnUuaGFzU3ViQ2xhc3M7XG5cdFxuXHQvLyBtZW51XG5cdHZhciBtZW51TGlua1NlbGVjdG9yID0gIG1lbnVCYXNlU2VsZWN0b3IgKyAnID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUxpbmtDbGFzcztcblx0dmFyIG1lbnVzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG1lbnVMaW5rU2VsZWN0b3IpKTtcblx0aGFuZGxlU2lkZWJhck1lbnVUb2dnbGUobWVudXMpO1xuXHRcblx0Ly8gc3VibWVudSBsdmwgMVxuXHR2YXIgc3VibWVudUx2bDFTZWxlY3RvciA9IG1lbnVCYXNlU2VsZWN0b3IgKyBzdWJtZW51QmFzZVNlbGVjdG9yO1xuXHR2YXIgc3VibWVudXNMdmwxID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHN1Ym1lbnVMdmwxU2VsZWN0b3IgKyAnID4gLicgKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1MaW5rQ2xhc3MpKTtcblx0aGFuZGxlU2lkZWJhck1lbnVUb2dnbGUoc3VibWVudXNMdmwxKTtcblx0XG5cdC8vIHN1Ym1lbnUgbHZsIDJcblx0dmFyIHN1Ym1lbnVMdmwyU2VsZWN0b3IgPSBtZW51QmFzZVNlbGVjdG9yICsgc3VibWVudUJhc2VTZWxlY3RvciArIHN1Ym1lbnVCYXNlU2VsZWN0b3I7XG5cdHZhciBzdWJtZW51c0x2bDIgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc3VibWVudUx2bDJTZWxlY3RvciArICcgPiAuJyArIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUxpbmtDbGFzcykpO1xuXHRoYW5kbGVTaWRlYmFyTWVudVRvZ2dsZShzdWJtZW51c0x2bDIpO1xufTtcblxuXG5cbi8qIDA0LiBIYW5kbGUgU2lkZWJhciBTY3JvbGwgTWVtb3J5XG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVTaWRlYmFyU2Nyb2xsTWVtb3J5ID0gZnVuY3Rpb24oKSB7XG5cdGlmICghYXBwLmlzTW9iaWxlKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0eXBlb2YoU3RvcmFnZSkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZihsb2NhbFN0b3JhZ2UpICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHR2YXIgZWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnIFsnKyBhcHAuc2Nyb2xsQmFyLmF0dHIgKyddJyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoZWxtKSB7XG5cdFx0XHRcdFx0ZWxtLm9uc2Nyb2xsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShhcHAuc2lkZWJhci5zY3JvbGxCYXIubG9jYWxTdG9yYWdlLCB0aGlzLnNjcm9sbFRvcCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHZhciBkZWZhdWx0U2Nyb2xsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYXBwLnNpZGViYXIuc2Nyb2xsQmFyLmxvY2FsU3RvcmFnZSk7XG5cdFx0XHRcdFx0aWYgKGRlZmF1bHRTY3JvbGwpIHtcblx0XHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJyBbJysgYXBwLnNjcm9sbEJhci5hdHRyICsnXScpLnNjcm9sbFRvcCA9IGRlZmF1bHRTY3JvbGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHR9XG5cdH1cbn07XG5cblxuXG4vKiAwNS4gSGFuZGxlIENhcmQgQWN0aW9uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVDYXJkQWN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGlmIChhcHAuY2FyZC5leHBhbmQuc3RhdHVzKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGFwcC5jYXJkLmV4cGFuZC5zdGF0dXMgPSB0cnVlO1xuXG5cdC8vIGV4cGFuZFxuXHR2YXIgZXhwYW5kVG9nZ2xlckxpc3QgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1snKyBhcHAuY2FyZC5leHBhbmQudG9nZ2xlQXR0ciArJ10nKSk7XG5cdHZhciBleHBhbmRUb2dnbGVyVG9vbHRpcExpc3QgPSBleHBhbmRUb2dnbGVyTGlzdC5tYXAoZnVuY3Rpb24gKGV4cGFuZFRvZ2dsZXJFbCkge1xuXHRcdGV4cGFuZFRvZ2dsZXJFbC5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdFx0dmFyIHRhcmdldCA9IHRoaXMuY2xvc2VzdCgnLmNhcmQnKTtcblx0XHRcdHZhciB0YXJnZXRDbGFzcyA9IGFwcC5jYXJkLmV4cGFuZC5jbGFzcztcblx0XHRcdHZhciB0YXJnZXRUb3AgPSA0MDtcblxuXHRcdFx0aWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKHRhcmdldENsYXNzKSAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHRhcmdldENsYXNzKSkge1xuXHRcdFx0XHR0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuXHRcdFx0XHR0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSh0YXJnZXRDbGFzcyk7XG5cdFx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSh0YXJnZXRDbGFzcyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQodGFyZ2V0Q2xhc3MpO1xuXHRcdFx0XHR0YXJnZXQuY2xhc3NMaXN0LmFkZCh0YXJnZXRDbGFzcyk7XG5cdFx0XHR9XG5cdFx0XG5cdFx0XHR3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3Jlc2l6ZScpKTtcblx0XHR9O1xuXHRcblx0XHRyZXR1cm4gbmV3IGJvb3RzdHJhcC5Ub29sdGlwKGV4cGFuZFRvZ2dsZXJFbCwge1xuXHRcdFx0dGl0bGU6IGFwcC5jYXJkLmV4cGFuZC50b2dnbGVUaXRsZSxcblx0XHRcdHBsYWNlbWVudDogJ2JvdHRvbScsXG5cdFx0XHR0cmlnZ2VyOiAnaG92ZXInLFxuXHRcdFx0Y29udGFpbmVyOiAnYm9keSdcblx0XHR9KTtcblx0fSk7XG59O1xuXG5cblxuLyogMDYuIEhhbmRsZSBUb29sdGlwICYgUG9wb3ZlciBBY3RpdmF0aW9uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kZWxUb29sdGlwUG9wb3ZlckFjdGl2YXRpb24gPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgdG9vbHRpcFRyaWdnZXJMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLmJvb3RzdHJhcC50b29sdGlwLmF0dHIgKyddJykpXG5cdHZhciB0b29sdGlwTGlzdCA9IHRvb2x0aXBUcmlnZ2VyTGlzdC5tYXAoZnVuY3Rpb24gKHRvb2x0aXBUcmlnZ2VyRWwpIHtcblx0XHRyZXR1cm4gbmV3IGJvb3RzdHJhcC5Ub29sdGlwKHRvb2x0aXBUcmlnZ2VyRWwpO1xuXHR9KTtcblx0XG5cdHZhciBwb3BvdmVyVHJpZ2dlckxpc3QgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1snKyBhcHAuYm9vdHN0cmFwLnBvcG92ZXIuYXR0ciArJ10nKSlcblx0dmFyIHBvcG92ZXJMaXN0ID0gcG9wb3ZlclRyaWdnZXJMaXN0Lm1hcChmdW5jdGlvbiAocG9wb3ZlclRyaWdnZXJFbCkge1xuXHRcdHJldHVybiBuZXcgYm9vdHN0cmFwLlBvcG92ZXIocG9wb3ZlclRyaWdnZXJFbCk7XG5cdH0pO1xufTtcblxuXG5cbi8qIDA3LiBIYW5kbGUgU2Nyb2xsIHRvIFRvcCBCdXR0b25cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVNjcm9sbFRvVG9wQnV0dG9uID0gZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIGVsbVRyaWdnZXJMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLnNjcm9sbFRvVG9wQnRuLnRvZ2dsZUF0dHIgKyddJykpO1xuXHRcblx0ZG9jdW1lbnQub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHRcdHZhciB0b3RhbFNjcm9sbCA9ICh3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jLnNjcm9sbFRvcCkgIC0gKGRvYy5jbGllbnRUb3AgfHwgMCk7XG5cdFx0dmFyIGVsbUxpc3QgPSBlbG1UcmlnZ2VyTGlzdC5tYXAoZnVuY3Rpb24oZWxtKSB7XG5cdFx0XHRpZiAodG90YWxTY3JvbGwgPj0gYXBwLnNjcm9sbFRvVG9wQnRuLmhlaWdodFNob3cpIHtcblx0XHRcdFx0aWYgKCFlbG0uY2xhc3NMaXN0LmNvbnRhaW5zKGFwcC5zY3JvbGxUb1RvcEJ0bi5zaG93Q2xhc3MpKSB7XG5cdFx0XHRcdFx0ZWxtLmNsYXNzTGlzdC5hZGQoYXBwLnNjcm9sbFRvVG9wQnRuLnNob3dDbGFzcyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsbS5jbGFzc0xpc3QucmVtb3ZlKGFwcC5zY3JvbGxUb1RvcEJ0bi5zaG93Q2xhc3MpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdFxuXHRcdHZhciBlbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFwcC5pZClbMF07XG5cdFxuXHRcdGlmICh0b3RhbFNjcm9sbCA+IDApIHtcblx0XHRcdGVsbS5jbGFzc0xpc3QuYWRkKGFwcC5oZWFkZXIuaGFzU2Nyb2xsQ2xhc3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbG0uY2xhc3NMaXN0LnJlbW92ZShhcHAuaGVhZGVyLmhhc1Njcm9sbENsYXNzKTtcblx0XHR9XG5cdH1cblx0XG5cdHZhciBlbG1MaXN0ID0gZWxtVHJpZ2dlckxpc3QubWFwKGZ1bmN0aW9uKGVsbSkge1xuXHRcdGVsbS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XG5cdFx0XHR3aW5kb3cuc2Nyb2xsVG8oe3RvcDogMCwgYmVoYXZpb3I6ICdzbW9vdGgnfSk7XG5cdFx0fVxuXHR9KTtcbn07XG5cblxuXG4vKiAwOC4gSGFuZGxlIGhleFRvUmdiYVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgaGV4VG9SZ2JhID0gZnVuY3Rpb24oaGV4LCB0cmFuc3BhcmVudCA9IDEpIHtcblx0dmFyIGM7XG5cdGlmKC9eIyhbQS1GYS1mMC05XXszfSl7MSwyfSQvLnRlc3QoaGV4KSl7XG5cdFx0Yz0gaGV4LnN1YnN0cmluZygxKS5zcGxpdCgnJyk7XG5cdFx0aWYoYy5sZW5ndGg9PSAzKXtcblx0XHRcdFx0Yz0gW2NbMF0sIGNbMF0sIGNbMV0sIGNbMV0sIGNbMl0sIGNbMl1dO1xuXHRcdH1cblx0XHRjPSAnMHgnK2Muam9pbignJyk7XG5cdFx0cmV0dXJuICdyZ2JhKCcrWyhjPj4xNikmMjU1LCAoYz4+OCkmMjU1LCBjJjI1NV0uam9pbignLCcpKycsJysgdHJhbnNwYXJlbnQgKycpJztcblx0fVxuICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCBIZXgnKTtcbn07XG5cblxuXG4vKiAwOS4gSGFuZGxlIFNjcm9sbCBUb1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgaGFuZGxlU2Nyb2xsVG8gPSBmdW5jdGlvbigpIHtcblx0dmFyIGVsbVRyaWdnZXJMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLnNjcm9sbFRvLmF0dHIgKyddJykpO1xuXHR2YXIgZWxtTGlzdCA9IGVsbVRyaWdnZXJMaXN0Lm1hcChmdW5jdGlvbihlbG0pIHtcblx0XHRlbG0ub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcblx0XHRcdHZhciB0YXJnZXRBdHRyID0gKGVsbS5nZXRBdHRyaWJ1dGUoYXBwLnNjcm9sbFRvLnRhcmdldCkpID8gdGhpcy5nZXRBdHRyaWJ1dGUoYXBwLnNjcm9sbFRvLnRhcmdldCkgOiB0aGlzLmdldEF0dHJpYnV0ZShhcHAuc2Nyb2xsVG8ubGlua1RhcmdldCk7XG5cdFx0XHR2YXIgdGFyZ2V0RWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0YXJnZXRBdHRyKVswXTtcblx0XHRcdHZhciB0YXJnZXRIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFwcC5oZWFkZXIuaWQpWzBdO1xuXHRcdFx0dmFyIHRhcmdldEhlaWdodCA9IHRhcmdldEhlYWRlci5vZmZzZXRIZWlnaHQ7XG5cdFx0XHRpZiAodGFyZ2V0RWxtKSB7XG5cdFx0XHRcdHZhciB0YXJnZXRUb3AgPSB0YXJnZXRFbG0ub2Zmc2V0VG9wIC0gdGFyZ2V0SGVpZ2h0IC0gMjQ7XG5cdFx0XHRcdHdpbmRvdy5zY3JvbGxUbyh7dG9wOiB0YXJnZXRUb3AsIGJlaGF2aW9yOiAnc21vb3RoJ30pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59O1xuXG5cblxuLyogMTAuIEhhbmRsZSBUb2dnbGUgQ2xhc3Ncbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVRvZ2dsZUNsYXNzID0gZnVuY3Rpb24oKSB7XG5cdHZhciBlbG1MaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLnRvZ2dsZUNsYXNzLnRvZ2dsZUF0dHIgKyddJykpO1xuXHRcblx0ZWxtTGlzdC5tYXAoZnVuY3Rpb24oZWxtKSB7XG5cdFx0ZWxtLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcblx0XHRcdHZhciB0YXJnZXRUb2dnbGVDbGFzcyA9IHRoaXMuZ2V0QXR0cmlidXRlKGFwcC50b2dnbGVDbGFzcy50b2dnbGVBdHRyKTtcblx0XHRcdHZhciB0YXJnZXREaXNtaXNzQ2xhc3MgPSB0aGlzLmdldEF0dHJpYnV0ZShhcHAuZGlzbWlzc0NsYXNzLnRvZ2dsZUF0dHIpO1xuXHRcdFx0dmFyIHRhcmdldFRvZ2dsZUVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5nZXRBdHRyaWJ1dGUoYXBwLnRvZ2dsZUNsYXNzLnRhcmdldEF0dHIpKTtcblx0XHRcblx0XHRcdGlmICghdGFyZ2V0RGlzbWlzc0NsYXNzKSB7XG5cdFx0XHRcdGlmICh0YXJnZXRUb2dnbGVFbG0uY2xhc3NMaXN0LmNvbnRhaW5zKHRhcmdldFRvZ2dsZUNsYXNzKSkge1xuXHRcdFx0XHRcdHRhcmdldFRvZ2dsZUVsbS5jbGFzc0xpc3QucmVtb3ZlKHRhcmdldFRvZ2dsZUNsYXNzKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0YXJnZXRUb2dnbGVFbG0uY2xhc3NMaXN0LmFkZCh0YXJnZXRUb2dnbGVDbGFzcyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICghdGFyZ2V0VG9nZ2xlRWxtLmNsYXNzTGlzdC5jb250YWlucyh0YXJnZXRUb2dnbGVDbGFzcykgJiYgIXRhcmdldFRvZ2dsZUVsbS5jbGFzc0xpc3QuY29udGFpbnModGFyZ2V0RGlzbWlzc0NsYXNzKSkge1xuXHRcdFx0XHRcdGlmICh0YXJnZXRUb2dnbGVFbG0uY2xhc3NMaXN0LmNvbnRhaW5zKHRhcmdldFRvZ2dsZUNsYXNzKSkge1xuXHRcdFx0XHRcdFx0dGFyZ2V0VG9nZ2xlRWxtLmNsYXNzTGlzdC5yZW1vdmUodGFyZ2V0VG9nZ2xlQ2xhc3MpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0YXJnZXRUb2dnbGVFbG0uY2xhc3NMaXN0LmFkZCh0YXJnZXRUb2dnbGVDbGFzcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICh0YXJnZXRUb2dnbGVFbG0uY2xhc3NMaXN0LmNvbnRhaW5zKHRhcmdldFRvZ2dsZUNsYXNzKSkge1xuXHRcdFx0XHRcdFx0dGFyZ2V0VG9nZ2xlRWxtLmNsYXNzTGlzdC5yZW1vdmUodGFyZ2V0VG9nZ2xlQ2xhc3MpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0YXJnZXRUb2dnbGVFbG0uY2xhc3NMaXN0LmFkZCh0YXJnZXRUb2dnbGVDbGFzcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICh0YXJnZXRUb2dnbGVFbG0uY2xhc3NMaXN0LmNvbnRhaW5zKHRhcmdldERpc21pc3NDbGFzcykpIHtcblx0XHRcdFx0XHRcdHRhcmdldFRvZ2dsZUVsbS5jbGFzc0xpc3QucmVtb3ZlKHRhcmdldERpc21pc3NDbGFzcyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRhcmdldFRvZ2dsZUVsbS5jbGFzc0xpc3QuYWRkKHRhcmdldERpc21pc3NDbGFzcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn1cblxuXG5cbi8qIDExLiBIYW5kbGUgVGhlbWUgUGFuZWxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVRoZW1lUGFuZWwgPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQvLyAxMi4xIFRoZW1lIFBhbmVsIC0gVG9nZ2xlIC8gRGlzbWlzc1xuXHR2YXIgZWxtTGlzdCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnWycrIGFwcC50aGVtZVBhbmVsLnRvZ2dsZUF0dHIgKyddJykpO1xuXHRcblx0ZWxtTGlzdC5tYXAoZnVuY3Rpb24oZWxtKSB7XG5cdFx0ZWxtLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcblx0XHRcdHZhciB0YXJnZXRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MpO1xuXHRcdFx0dmFyIHRhcmdldEV4cGFuZCA9IGZhbHNlO1xuXHRcdFxuXHRcdFx0aWYgKHRhcmdldENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoYXBwLnRoZW1lUGFuZWwuYWN0aXZlQ2xhc3MpKSB7XG5cdFx0XHRcdHRhcmdldENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKGFwcC50aGVtZVBhbmVsLmFjdGl2ZUNsYXNzKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRhcmdldENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGFwcC50aGVtZVBhbmVsLmFjdGl2ZUNsYXNzKTtcblx0XHRcdFx0dGFyZ2V0RXhwYW5kID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmIChDb29raWVzKSB7XG5cdFx0XHRcdENvb2tpZXMuc2V0KGFwcC50aGVtZVBhbmVsLmNvb2tpZU5hbWUsIHRhcmdldEV4cGFuZCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblx0XG5cdC8vIDEyLjIgVGhlbWUgUGFuZWwgLSBQYWdlIExvYWQgQ29va2llcyBcblx0aWYgKENvb2tpZXMpIHtcblx0XHR2YXIgdGhlbWVQYW5lbEV4cGFuZCA9IENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLmNvb2tpZU5hbWUpO1xuXHRcdFxuXHRcdGlmICh0aGVtZVBhbmVsRXhwYW5kID09ICd0cnVlJyB8fCB0eXBlb2YgdGhlbWVQYW5lbEV4cGFuZCA9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dmFyIGVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1snKyBhcHAudGhlbWVQYW5lbC50b2dnbGVBdHRyICsnXScpO1xuXHRcdFx0aWYgKGVsbSkge1xuXHRcdFx0XHRlbG0uY2xpY2soKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdFxuXHQvLyAxMi4zIFRoZW1lIFBhbmVsIC0gVGhlbWUgU2VsZWN0b3Jcblx0dmFyIGVsbUxpc3QgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWUudG9nZ2xlQXR0ciArJ10nKSk7XG5cdGVsbUxpc3QubWFwKGZ1bmN0aW9uKGVsbSkge1xuXHRcdGVsbS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0Lmxlbmd0aDsgeCsrKSB7XG5cdFx0XHRcdHZhciB0YXJnZXRDbGFzcyA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0W3hdO1xuXHRcdFx0XHRpZiAodGFyZ2V0Q2xhc3Muc2VhcmNoKCd0aGVtZS0nKSA+IC0xKSB7XG5cdFx0XHRcdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKHRhcmdldENsYXNzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFxuXHRcdFx0dmFyIHRhcmdldFRoZW1lID0gdGhpcy5nZXRBdHRyaWJ1dGUoYXBwLnRoZW1lUGFuZWwudGhlbWUuY2xhc3NBdHRyKTtcblx0XHRcdHZhciB0YXJnZXRUaGVtZUxpc3QgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWUudG9nZ2xlQXR0ciArJ10nKSk7XG5cdFx0XHRcblx0XHRcdGlmICh0YXJnZXRUaGVtZSkge1xuXHRcdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQodGFyZ2V0VGhlbWUpO1xuXHRcdFx0fVxuXHRcdFx0dGFyZ2V0VGhlbWVMaXN0Lm1hcChmdW5jdGlvbih0YXJnZXRFbG0pIHtcblx0XHRcdFx0aWYgKHRhcmdldEVsbS5nZXRBdHRyaWJ1dGUoYXBwLnRoZW1lUGFuZWwudGhlbWUuY2xhc3NBdHRyKSAhPSB0YXJnZXRUaGVtZSkge1xuXHRcdFx0XHRcdHRhcmdldEVsbS5jbG9zZXN0KCcuJysgYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0SXRlbUNMYXNzKS5jbGFzc0xpc3QucmVtb3ZlKGFwcC50aGVtZVBhbmVsLnRoZW1lLmFjdGl2ZUNsYXNzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdHRoaXMuY2xvc2VzdCgnLicrIGFwcC50aGVtZVBhbmVsLnRoZW1lTGlzdEl0ZW1DTGFzcykuY2xhc3NMaXN0LmFkZChhcHAudGhlbWVQYW5lbC50aGVtZS5hY3RpdmVDbGFzcyk7XG5cdFx0XHRcblx0XHRcdGlmIChDb29raWVzKSB7XG5cdFx0XHRcdENvb2tpZXMuc2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lLmNvb2tpZU5hbWUsIHRhcmdldFRoZW1lKTtcblx0XHRcdFx0YXBwLmNvbG9yLnRoZW1lID0gKGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy10aGVtZScpKS50cmltKCk7XG5cdFx0XHRcdGFwcC5jb2xvci50aGVtZVJnYiA9IChnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtdGhlbWUtcmdiJykpLnRyaW0oKTtcblx0XHRcdFx0XG5cdFx0XHRcdGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCd0aGVtZS1yZWxvYWQnKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblx0XG5cdGlmIChDb29raWVzKSB7XG5cdFx0aWYgKENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lLmNvb2tpZU5hbWUpKSB7XG5cdFx0XHR2YXIgdGFyZ2V0RWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZS50b2dnbGVBdHRyICsnXScgKyAnWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lLmNsYXNzQXR0ciArJz1cIicrIENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lLmNvb2tpZU5hbWUpICsnXCJdJyk7XG5cdFx0XHRcblx0XHRcdGlmICh0YXJnZXRFbG0pIHtcblx0XHRcdFx0dGFyZ2V0RWxtLmNsaWNrKCk7XG5cdFx0XHRcblx0XHRcdFx0YXBwLmNvbG9yLnRoZW1lID0gKGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy10aGVtZScpKS50cmltKCk7XG5cdFx0XHRcdGFwcC5jb2xvci50aGVtZVJnYiA9IChnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtdGhlbWUtcmdiJykpLnRyaW0oKTtcblx0XHRcdFxuXHRcdFx0XHRkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgndGhlbWUtcmVsb2FkJykpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0XG5cdC8vIDEyLjQgVGhlbWUgUGFuZWwgLSBCYWNrZ3JvdW5kIFNlbGVjdG9yXG5cdHZhciBlbG1MaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIudG9nZ2xlQXR0ciArJ10nKSk7XG5cdGVsbUxpc3QubWFwKGZ1bmN0aW9uKGVsbSkge1xuXHRcdGVsbS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XG5cdFx0XHR2YXIgaHRtbEVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKTtcblx0XHRcdHZhciB0YXJnZXRUaGVtZSA9IHRoaXMuZ2V0QXR0cmlidXRlKGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIuY2xhc3NBdHRyKTtcblx0XHRcdGZvciAodmFyIHggPSAwOyB4IDwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5sZW5ndGg7IHgrKykge1xuXHRcdFx0XHR2YXIgdGFyZ2V0Q2xhc3MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0W3hdO1xuXHRcdFx0XHRpZiAodGFyZ2V0Q2xhc3Muc2VhcmNoKCdiZy1jb3Zlci0nKSA+IC0xKSB7XG5cdFx0XHRcdFx0aHRtbEVsbS5jbGFzc0xpc3QucmVtb3ZlKHRhcmdldENsYXNzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAodGFyZ2V0VGhlbWUpIHtcblx0XHRcdFx0aHRtbEVsbS5jbGFzc0xpc3QuYWRkKHRhcmdldFRoZW1lKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0dmFyIHRhcmdldENvdmVyTGlzdCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLnRvZ2dsZUF0dHIgKyddJykpO1xuXHRcdFx0dGFyZ2V0Q292ZXJMaXN0Lm1hcChmdW5jdGlvbih0YXJnZXRFbG0pIHtcblx0XHRcdFx0aWYgKHRhcmdldEVsbS5nZXRBdHRyaWJ1dGUoYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci50b2dnbGVBdHRyKSAhPSB0YXJnZXRUaGVtZSkge1xuXHRcdFx0XHRcdHRhcmdldEVsbS5jbG9zZXN0KCcuJysgYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlckl0ZW1DbGFzcykuY2xhc3NMaXN0LnJlbW92ZShhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLmFjdGl2ZUNsYXNzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdHRoaXMuY2xvc2VzdCgnLicrIGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXJJdGVtQ2xhc3MpLmNsYXNzTGlzdC5hZGQoYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci5hY3RpdmVDbGFzcyk7XG5cdFx0XHRpZiAoQ29va2llcykge1xuXHRcdFx0XHRDb29raWVzLnNldChhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLmNvb2tpZU5hbWUsIHRhcmdldFRoZW1lKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9KTtcblx0XG5cdGlmIChDb29raWVzKSB7XG5cdFx0aWYgKENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIuY29va2llTmFtZSkpIHtcblx0XHRcdHZhciB0YXJnZXRFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIudG9nZ2xlQXR0ciArJ10nICsgJ1snKyBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLmNsYXNzQXR0ciArJz1cIicrIENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIuY29va2llTmFtZSkgKydcIl0nKTtcblx0XHRcdGlmICh0YXJnZXRFbG0pIHtcblx0XHRcdFx0dGFyZ2V0RWxtLmNsaWNrKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdFxuXHRcblx0Ly8gMTIuNSBUaGVtZSBQYW5lbCAtIE1vZGUgU2VsZWN0b3Jcblx0dmFyIGVsbXMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVNb2RlLnRvZ2dsZUF0dHIgKyddJykpO1xuXHRlbG1zLm1hcChmdW5jdGlvbihlbG0pIHtcblx0XHRlbG0ub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFxuXHRcdFx0dmFyIHRhcmdldEVsbSA9IHRoaXM7XG5cdFx0XHR2YXIgdGFyZ2V0TW9kZSA9ICh0YXJnZXRFbG0uZ2V0QXR0cmlidXRlKGFwcC50aGVtZVBhbmVsLnRoZW1lTW9kZS52YWx1ZUF0dHIpKSA/IHRhcmdldEVsbS5nZXRBdHRyaWJ1dGUoYXBwLnRoZW1lUGFuZWwudGhlbWVNb2RlLnZhbHVlQXR0cikgOiAnJztcblx0XHRcblx0XHRcdGlmICh0YXJnZXRNb2RlID09ICdkYXJrJykge1xuXHRcdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuc2V0QXR0cmlidXRlKGFwcC50aGVtZVBhbmVsLnRoZW1lTW9kZS5hdHRyLCB0YXJnZXRNb2RlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5yZW1vdmVBdHRyaWJ1dGUoYXBwLnRoZW1lUGFuZWwudGhlbWVNb2RlLmF0dHIpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKENvb2tpZXMpIHtcblx0XHRcdFx0Q29va2llcy5zZXQoYXBwLnRoZW1lUGFuZWwudGhlbWVNb2RlLmNvb2tpZU5hbWUsIHRhcmdldE1vZGUpO1xuXHRcdFx0fVxuXHRcdFx0dGFyZ2V0RWxtLmNsYXNzTGlzdC5hZGQoYXBwLnRoZW1lUGFuZWwudGhlbWVNb2RlLmFjdGl2ZUNsYXNzKTtcblx0XHRcdFxuXHRcdFx0dmFyIGVsbXMyID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lTW9kZS50b2dnbGVBdHRyICsnXScpKTtcblx0XHRcdGVsbXMyLm1hcChmdW5jdGlvbihlbG0yKSB7XG5cdFx0XHRcdGlmIChlbG0yICE9IHRhcmdldEVsbSkge1xuXHRcdFx0XHRcdGVsbTIuY2xhc3NMaXN0LnJlbW92ZShhcHAudGhlbWVQYW5lbC50aGVtZU1vZGUuYWN0aXZlQ2xhc3MpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0aGFuZGxlQ3NzVmFyaWFibGUoKTtcblx0XHRcdGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd0aGVtZS1yZWxvYWQnKSk7XG5cdFx0fVxuXHR9KTtcblx0XG5cdGlmIChDb29raWVzKSB7XG5cdFx0aWYgKENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lTW9kZS5jb29raWVOYW1lKSkge1xuXHRcdFx0dmFyIHRhcmdldEVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVNb2RlLnRvZ2dsZUF0dHIgKyddJyArICdbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVNb2RlLnZhbHVlQXR0ciArJz1cIicrIENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lTW9kZS5jb29raWVOYW1lKSArJ1wiXScpO1xuXHRcdFx0aWYgKHRhcmdldEVsbSkge1xuXHRcdFx0XHR0YXJnZXRFbG0uY2xpY2soKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cblxuXG4vKiAxMi4gSGFuZGxlIENTUyBWYXJpYWJsZVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgaGFuZGxlQ3NzVmFyaWFibGUgPSBmdW5jdGlvbigpIHtcblx0dmFyIHJvb3RTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSk7XG5cdFxuXHQvLyBmb250XG5cdGlmIChhcHAudmFyaWFibGVGb250TGlzdCAmJiBhcHAudmFyaWFibGVQcmVmaXgpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IChhcHAudmFyaWFibGVGb250TGlzdCkubGVuZ3RoOyBpKyspIHtcblx0XHRcdGFwcC5mb250W2FwcC52YXJpYWJsZUZvbnRMaXN0W2ldLnJlcGxhY2UoLy0oW2EtenwwLTldKS9nLCAobWF0Y2gsIGxldHRlcikgPT4gbGV0dGVyLnRvVXBwZXJDYXNlKCkpXSA9IHJvb3RTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCctLScrIGFwcC52YXJpYWJsZVByZWZpeCArIGFwcC52YXJpYWJsZUZvbnRMaXN0W2ldKS50cmltKCk7XG5cdFx0fVxuXHR9XG5cdFxuXHQvLyBjb2xvclxuXHRpZiAoYXBwLnZhcmlhYmxlQ29sb3JMaXN0ICYmIGFwcC52YXJpYWJsZVByZWZpeCkge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgKGFwcC52YXJpYWJsZUNvbG9yTGlzdCkubGVuZ3RoOyBpKyspIHtcblx0XHRcdGFwcC5jb2xvclthcHAudmFyaWFibGVDb2xvckxpc3RbaV0ucmVwbGFjZSgvLShbYS16fDAtOV0pL2csIChtYXRjaCwgbGV0dGVyKSA9PiBsZXR0ZXIudG9VcHBlckNhc2UoKSldID0gcm9vdFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy0tJysgYXBwLnZhcmlhYmxlUHJlZml4ICsgYXBwLnZhcmlhYmxlQ29sb3JMaXN0W2ldKS50cmltKCk7XG5cdFx0fVxuXHR9XG59O1xuXG5cbi8qIDEzLiBIYW5kbGUgVG9wIE1lbnUgLSBVbmxpbWl0ZWQgVG9wIE1lbnUgUmVuZGVyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVVbmxpbWl0ZWRUb3BOYXZSZW5kZXIgPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdC8vIGZ1bmN0aW9uIGhhbmRsZSBtZW51IGJ1dHRvbiBhY3Rpb24gLSBuZXh0IC8gcHJldlxuXHRmdW5jdGlvbiBoYW5kbGVNZW51QnV0dG9uQWN0aW9uKGVsZW1lbnQsIGRpcmVjdGlvbikge1xuXHRcdHZhciBvYmogPSBlbGVtZW50LmNsb3Nlc3QoJy4nICsgYXBwLnRvcE5hdi5tZW51LmNsYXNzKTtcblx0XHR2YXIgb2JqU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShvYmopO1xuXHRcdHZhciBib2R5U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykpO1xuXHRcdHZhciB0YXJnZXRDc3MgPSAoYm9keVN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2RpcmVjdGlvbicpID09ICdydGwnKSA/ICdtYXJnaW4tcmlnaHQnIDogJ21hcmdpbi1sZWZ0Jztcblx0XHR2YXIgbWFyZ2luTGVmdCA9IHBhcnNlSW50KG9ialN0eWxlLmdldFByb3BlcnR5VmFsdWUodGFyZ2V0Q3NzKSk7ICBcblx0XHR2YXIgY29udGFpbmVyV2lkdGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnRvcE5hdi5jbGFzcykuY2xpZW50V2lkdGggLSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnRvcE5hdi5jbGFzcykuY2xpZW50SGVpZ2h0ICogMjtcblx0XHR2YXIgdG90YWxXaWR0aCA9IDA7XG5cdFx0dmFyIGZpbmFsU2Nyb2xsV2lkdGggPSAwO1xuXHRcdHZhciBjb250cm9sUHJldk9iaiA9IG9iai5xdWVyeVNlbGVjdG9yKCcubWVudS1jb250cm9sLXN0YXJ0Jyk7XG5cdFx0dmFyIGNvbnRyb2xQcmV2V2lkdGggPSAoY29udHJvbFByZXZPYmopID8gY29udHJvbFByZXZPYmouY2xpZW50V2lkdGggOiAwO1xuXHRcdHZhciBjb250cm9sTmV4dE9iaiA9IG9iai5xdWVyeVNlbGVjdG9yKCcubWVudS1jb250cm9sLWVuZCcpO1xuXHRcdHZhciBjb250cm9sTmV4dFdpZHRoID0gKGNvbnRyb2xQcmV2T2JqKSA/IGNvbnRyb2xOZXh0T2JqLmNsaWVudFdpZHRoIDogMDtcblx0XHR2YXIgY29udHJvbFdpZHRoID0gY29udHJvbFByZXZXaWR0aCArIGNvbnRyb2xOZXh0V2lkdGg7XG5cdFx0XG5cdFx0dmFyIGVsbXMgPSBbXS5zbGljZS5jYWxsKG9iai5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGFwcC50b3BOYXYubWVudS5pdGVtQ2xhc3MpKTtcblx0XHRpZiAoZWxtcykge1xuXHRcdFx0ZWxtcy5tYXAoZnVuY3Rpb24oZWxtKSB7XG5cdFx0XHRcdGlmICghZWxtLmNsYXNzTGlzdC5jb250YWlucyhhcHAudG9wTmF2LmNvbnRyb2wuY2xhc3MpKSB7XG5cdFx0XHRcdFx0dG90YWxXaWR0aCArPSBlbG0uY2xpZW50V2lkdGg7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHN3aXRjaCAoZGlyZWN0aW9uKSB7XG5cdFx0XHRjYXNlICduZXh0Jzpcblx0XHRcdFx0dmFyIHdpZHRoTGVmdCA9IHRvdGFsV2lkdGggKyBtYXJnaW5MZWZ0IC0gY29udGFpbmVyV2lkdGg7XG5cdFx0XHRcdGlmICh3aWR0aExlZnQgPD0gY29udGFpbmVyV2lkdGgpIHtcblx0XHRcdFx0XHRmaW5hbFNjcm9sbFdpZHRoID0gd2lkdGhMZWZ0IC0gbWFyZ2luTGVmdCAtIGNvbnRyb2xXaWR0aDtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0b2JqLnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuY2xhc3MgKycuJysgYXBwLnRvcE5hdi5jb250cm9sLmJ1dHRvbk5leHQuY2xhc3MpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcblx0XHRcdFx0XHR9LCBhcHAuYW5pbWF0aW9uLnNwZWVkKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRmaW5hbFNjcm9sbFdpZHRoID0gY29udGFpbmVyV2lkdGggLSBtYXJnaW5MZWZ0IC0gY29udHJvbFdpZHRoO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGZpbmFsU2Nyb2xsV2lkdGggIT09IDApIHtcblx0XHRcdFx0XHRvYmouc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gJ2hlaWdodCwgbWFyZ2luLCBwYWRkaW5nJztcblx0XHRcdFx0XHRvYmouc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYXBwLmFuaW1hdGlvbi5zcGVlZCArICdtcyc7XG5cdFx0XHRcdFx0aWYgKGJvZHlTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdkaXJlY3Rpb24nKSAhPSAncnRsJykge1xuXHRcdFx0XHRcdFx0b2JqLnN0eWxlLm1hcmdpbkxlZnQgPSAnLScgKyBmaW5hbFNjcm9sbFdpZHRoICsgJ3B4Jztcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0b2JqLnN0eWxlLm1hcmdpblJpZ2h0ID0gJy0nICsgZmluYWxTY3JvbGxXaWR0aCArICdweCc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRvYmouc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gJyc7XG5cdFx0XHRcdFx0XHRvYmouc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJyc7XG5cdFx0XHRcdFx0XHRvYmoucXVlcnlTZWxlY3RvcignLicrIGFwcC50b3BOYXYuY29udHJvbC5jbGFzcyArJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuYnV0dG9uUHJldi5jbGFzcykuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXHRcdFx0XHRcdH0sIGFwcC5hbmltYXRpb24uc3BlZWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAncHJldic6XG5cdFx0XHRcdHZhciB3aWR0aExlZnQgPSAtbWFyZ2luTGVmdDtcblxuXHRcdFx0XHRpZiAod2lkdGhMZWZ0IDw9IGNvbnRhaW5lcldpZHRoKSB7XG5cdFx0XHRcdFx0b2JqLnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuY2xhc3MgKycuJysgYXBwLnRvcE5hdi5jb250cm9sLmJ1dHRvblByZXYuY2xhc3MpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcblx0XHRcdFx0XHRmaW5hbFNjcm9sbFdpZHRoID0gMDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRmaW5hbFNjcm9sbFdpZHRoID0gd2lkdGhMZWZ0IC0gY29udGFpbmVyV2lkdGggKyBjb250cm9sV2lkdGg7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdG9iai5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSAnaGVpZ2h0LCBtYXJnaW4sIHBhZGRpbmcnO1xuXHRcdFx0XHRvYmouc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYXBwLmFuaW1hdGlvbi5zcGVlZCArICdtcyc7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoYm9keVN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2RpcmVjdGlvbicpICE9ICdydGwnKSB7XG5cdFx0XHRcdFx0b2JqLnN0eWxlLm1hcmdpbkxlZnQgPSAnLScgKyBmaW5hbFNjcm9sbFdpZHRoICsgJ3B4Jztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRvYmouc3R5bGUubWFyZ2luUmlnaHQgPSAnLScgKyBmaW5hbFNjcm9sbFdpZHRoICsgJ3B4Jztcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRvYmouc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gJyc7XG5cdFx0XHRcdFx0b2JqLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcnO1xuXHRcdFx0XHRcdG9iai5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnRvcE5hdi5jb250cm9sLmNsYXNzICsnLicrIGFwcC50b3BOYXYuY29udHJvbC5idXR0b25OZXh0LmNsYXNzKS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG5cdFx0XHRcdH0sIGFwcC5hbmltYXRpb24uc3BlZWQpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblxuXHQvLyBoYW5kbGUgcGFnZSBsb2FkIGFjdGl2ZSBtZW51IGZvY3VzXG5cdGZ1bmN0aW9uIGhhbmRsZVBhZ2VMb2FkTWVudUZvY3VzKCkge1xuXHRcdHZhciB0YXJnZXRNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrIGFwcC50b3BOYXYuY2xhc3MgKycgLicrIGFwcC50b3BOYXYubWVudS5jbGFzcyk7XG5cdFx0aWYgKCF0YXJnZXRNZW51KSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciB0YXJnZXRNZW51U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXRNZW51KTtcblx0XHR2YXIgYm9keVN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSk7XG5cdFx0dmFyIHRhcmdldENzcyA9IChib2R5U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnZGlyZWN0aW9uJykgPT0gJ3J0bCcpID8gJ21hcmdpbi1yaWdodCcgOiAnbWFyZ2luLWxlZnQnO1xuXHRcdHZhciBtYXJnaW5MZWZ0ID0gcGFyc2VJbnQodGFyZ2V0TWVudVN0eWxlLmdldFByb3BlcnR5VmFsdWUodGFyZ2V0Q3NzKSk7XG5cdFx0dmFyIHZpZXdXaWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAudG9wTmF2LmNsYXNzICsnJykuY2xpZW50V2lkdGg7XG5cdFx0dmFyIHByZXZXaWR0aCA9IDA7XG5cdFx0dmFyIHNwZWVkID0gMDtcblx0XHR2YXIgZnVsbFdpZHRoID0gMDtcblx0XHR2YXIgY29udHJvbFByZXZPYmogPSB0YXJnZXRNZW51LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWNvbnRyb2wtc3RhcnQnKTtcblx0XHR2YXIgY29udHJvbFByZXZXaWR0aCA9IChjb250cm9sUHJldk9iaikgPyBjb250cm9sUHJldk9iai5jbGllbnRXaWR0aCA6IDA7XG5cdFx0dmFyIGNvbnRyb2xOZXh0T2JqID0gdGFyZ2V0TWVudS5xdWVyeVNlbGVjdG9yKCcubWVudS1jb250cm9sLWVuZCcpO1xuXHRcdHZhciBjb250cm9sTmV4dFdpZHRoID0gKGNvbnRyb2xQcmV2T2JqKSA/IGNvbnRyb2xOZXh0T2JqLmNsaWVudFdpZHRoIDogMDtcblx0XHR2YXIgY29udHJvbFdpZHRoID0gMDtcblxuXHRcdHZhciBlbG1zID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJysgYXBwLnRvcE5hdi5jbGFzcyArJyAuJysgYXBwLnRvcE5hdi5tZW51LmNsYXNzICsgJyA+IC4nKyBhcHAudG9wTmF2Lm1lbnUuaXRlbUNsYXNzICsnJykpO1xuXHRcdGlmIChlbG1zKSB7XG5cdFx0XHR2YXIgZm91bmQgPSBmYWxzZTtcblx0XHRcdGVsbXMubWFwKGZ1bmN0aW9uKGVsbSkge1xuXHRcdFx0XHRpZiAoIWVsbS5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnUtY29udHJvbCcpKSB7XG5cdFx0XHRcdFx0ZnVsbFdpZHRoICs9IGVsbS5jbGllbnRXaWR0aDtcblx0XHRcdFx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRcdFx0XHRwcmV2V2lkdGggKz0gZWxtLmNsaWVudFdpZHRoO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoZWxtLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcblx0XHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0XHRcblx0XHR2YXIgZWxtID0gdGFyZ2V0TWVudS5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnRvcE5hdi5jb250cm9sLmNsYXNzICsnLicrIGFwcC50b3BOYXYuY29udHJvbC5idXR0b25OZXh0LmNsYXNzKTtcblx0XHRpZiAocHJldldpZHRoICE9IGZ1bGxXaWR0aCAmJiBmdWxsV2lkdGggPj0gdmlld1dpZHRoKSB7XG5cdFx0XHRlbG0uY2xhc3NMaXN0LmFkZChhcHAudG9wTmF2LmNvbnRyb2wuc2hvd0NsYXNzKTtcblx0XHRcdGNvbnRyb2xXaWR0aCArPSBjb250cm9sTmV4dFdpZHRoO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbG0uY2xhc3NMaXN0LnJlbW92ZShhcHAudG9wTmF2LmNvbnRyb2wuc2hvd0NsYXNzKTtcblx0XHR9XG5cblx0XHR2YXIgZWxtID0gdGFyZ2V0TWVudS5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnRvcE5hdi5jb250cm9sLmNsYXNzICsnLicrIGFwcC50b3BOYXYuY29udHJvbC5idXR0b25QcmV2LmNsYXNzKTtcblx0XHRpZiAocHJldldpZHRoID49IHZpZXdXaWR0aCAmJiBmdWxsV2lkdGggPj0gdmlld1dpZHRoKSB7XG5cdFx0XHRlbG0uY2xhc3NMaXN0LmFkZChhcHAudG9wTmF2LmNvbnRyb2wuc2hvd0NsYXNzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWxtLmNsYXNzTGlzdC5yZW1vdmUoYXBwLnRvcE5hdi5jb250cm9sLnNob3dDbGFzcyk7XG5cdFx0fVxuXHRcdFxuXHRcdGlmIChwcmV2V2lkdGggPj0gdmlld1dpZHRoKSB7XG5cdFx0XHR2YXIgZmluYWxTY3JvbGxXaWR0aCA9IHByZXZXaWR0aCAtIHZpZXdXaWR0aCArIGNvbnRyb2xXaWR0aDtcblx0XHRcdGlmIChib2R5U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnZGlyZWN0aW9uJykgIT0gJ3J0bCcpIHtcblx0XHRcdFx0dGFyZ2V0TWVudS5zdHlsZS5tYXJnaW5MZWZ0ID0gJy0nICsgZmluYWxTY3JvbGxXaWR0aCArICdweCc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0YXJnZXRNZW51LnN0eWxlLm1hcmdpblJpZ2h0ID0gJy0nICsgZmluYWxTY3JvbGxXaWR0aCArICdweCc7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gaGFuZGxlIG1lbnUgbmV4dCBidXR0b24gY2xpY2sgYWN0aW9uXG5cdHZhciBlbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbJysgYXBwLnRvcE5hdi5jb250cm9sLmJ1dHRvbk5leHQudG9nZ2xlQXR0ciArJ10nKTtcblx0aWYgKGVsbSkge1xuXHRcdGVsbS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0aGFuZGxlTWVudUJ1dHRvbkFjdGlvbih0aGlzLCduZXh0Jyk7XG5cdFx0fTtcblx0fVxuXHRcblx0Ly8gaGFuZGxlIG1lbnUgcHJldiBidXR0b24gY2xpY2sgYWN0aW9uXG5cdHZhciBlbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbJysgYXBwLnRvcE5hdi5jb250cm9sLmJ1dHRvblByZXYudG9nZ2xlQXR0ciArJ10nKTtcblx0aWYgKGVsbSkge1xuXHRcdGVsbS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0aGFuZGxlTWVudUJ1dHRvbkFjdGlvbih0aGlzLCdwcmV2Jyk7XG5cdFx0fTtcblx0fVxuXG5cdC8vIGhhbmRsZSB1bmxpbWl0ZWQgbWVudSByZXNwb25zaXZlIHNldHRpbmdcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0YXJnZXRFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnRvcE5hdi5jbGFzcyArJyAuJysgYXBwLnRvcE5hdi5tZW51LmNsYXNzKTtcblx0XHRcblx0XHRpZiAodGFyZ2V0RWxtKSB7XG5cdFx0XHR0YXJnZXRFbG0ucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuXHRcdH1cblx0XHRpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA+IDc2Nykge1xuXHRcdFx0aGFuZGxlUGFnZUxvYWRNZW51Rm9jdXMoKTtcblx0XHR9XG5cdH0pO1xuXG5cdGhhbmRsZVBhZ2VMb2FkTWVudUZvY3VzKCk7XG5cdFxuXHRmdW5jdGlvbiBlbmFibGVGbHVpZENvbnRhaW5lckRyYWcoY29udGFpbmVyQ2xhc3NOYW1lKSB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJDbGFzc05hbWUpO1xuXHRcdGlmICghY29udGFpbmVyKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbnN0IG1lbnUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLm1lbnUnKTtcblx0XHRjb25zdCBtZW51SXRlbSA9IG1lbnUucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbTpub3QoLm1lbnUtY29udHJvbCknKTtcblxuXHRcdGxldCBzdGFydFgsIHNjcm9sbExlZnQsIG1vdXNlRG93bjtcblx0XHRsZXQgbWVudVdpZHRoID0gMDtcblx0XHRsZXQgbWF4U2Nyb2xsID0gMDtcblxuXHRcdG1lbnVJdGVtLmZvckVhY2goKGVsZW1lbnQpID0+IHtcblx0XHRcdG1lbnVXaWR0aCArPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuXHRcdH0pO1xuXG5cdFx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XG5cdFx0XHRtb3VzZURvd24gPSB0cnVlO1xuXHRcdFx0c3RhcnRYID0gZS5wYWdlWDtcblx0XHRcdHNjcm9sbExlZnQgPSBwYXJzZUludChtZW51LnN0eWxlLm1hcmdpbkxlZnQpO1xuXHRcdFx0bWF4U2Nyb2xsID0gd2luZG93LmlubmVyV2lkdGggLSBtZW51V2lkdGg7XG5cdFx0fSk7XG5cblx0XHRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChlKSA9PiB7XG5cdFx0XHRtb3VzZURvd24gPSB0cnVlO1xuXHRcdFx0Y29uc3QgdG91Y2ggPSBlLnRhcmdldFRvdWNoZXNbMF07XG5cdFx0XHRzdGFydFggPSB0b3VjaC5wYWdlWDtcblx0XHRcdHNjcm9sbExlZnQgPSBwYXJzZUludChtZW51LnN0eWxlLm1hcmdpbkxlZnQpO1xuXHRcdH0pO1xuXG5cdFx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB7XG5cdFx0XHRtb3VzZURvd24gPSBmYWxzZTtcblx0XHR9KTtcblxuXHRcdGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsICgpID0+IHtcblx0XHRcdG1vdXNlRG93biA9IGZhbHNlO1xuXHRcdH0pO1xuXG5cdFx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChlKSA9PiB7XG5cdFx0XHRpZiAoIXN0YXJ0WCB8fCAhbW91c2VEb3duKSByZXR1cm47XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRjb25zdCB4ID0gZS5wYWdlWDtcblx0XHRcdGNvbnN0IHdhbGtYID0gKHggLSBzdGFydFgpICogMTtcblx0XHRcdHZhciB0b3RhbE1hcmdpbkxlZnQgPSBzY3JvbGxMZWZ0ICsgd2Fsa1g7XG5cdFx0XHRpZiAodG90YWxNYXJnaW5MZWZ0ID4gMCkge1xuXHRcdFx0XHR0b3RhbE1hcmdpbkxlZnQgPSAwO1xuXHRcdFx0XHRtZW51LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuY2xhc3MgKycuJysgYXBwLnRvcE5hdi5jb250cm9sLmJ1dHRvblByZXYuY2xhc3MpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1lbnUucXVlcnlTZWxlY3RvcignLicrIGFwcC50b3BOYXYuY29udHJvbC5jbGFzcyArJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuYnV0dG9uUHJldi5jbGFzcykuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRvdGFsTWFyZ2luTGVmdCA8PSBtYXhTY3JvbGwpIHtcblx0XHRcdFx0dG90YWxNYXJnaW5MZWZ0ID0gbWF4U2Nyb2xsO1xuXHRcdFx0XHRtZW51LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuY2xhc3MgKycuJysgYXBwLnRvcE5hdi5jb250cm9sLmJ1dHRvbk5leHQuY2xhc3MpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1lbnUucXVlcnlTZWxlY3RvcignLicrIGFwcC50b3BOYXYuY29udHJvbC5jbGFzcyArJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuYnV0dG9uTmV4dC5jbGFzcykuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG1lbnVXaWR0aCA8IHdpbmRvdy5pbm5lcldpZHRoKSB7XG5cdFx0XHRcdG1lbnUucXVlcnlTZWxlY3RvcignLicrIGFwcC50b3BOYXYuY29udHJvbC5jbGFzcyArJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuYnV0dG9uUHJldi5jbGFzcykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG1heFNjcm9sbCA+IDApIHtcblx0XHRcdFx0bWVudS5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnRvcE5hdi5jb250cm9sLmNsYXNzICsnLicrIGFwcC50b3BOYXYuY29udHJvbC5idXR0b25OZXh0LmNsYXNzKS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG5cdFx0XHR9XG5cdFx0XHRtZW51LnN0eWxlLm1hcmdpbkxlZnQgPSB0b3RhbE1hcmdpbkxlZnQgKyAncHgnO1xuXHRcdH0pO1xuXG5cdFx0Y29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIChlKSA9PiB7XG5cdFx0XHRpZiAoIXN0YXJ0WCB8fCAhbW91c2VEb3duKSByZXR1cm47XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRjb25zdCB0b3VjaCA9IGUudGFyZ2V0VG91Y2hlc1swXTtcblx0XHRcdGNvbnN0IHggPSB0b3VjaC5wYWdlWDtcblx0XHRcdGNvbnN0IHdhbGtYID0gKHggLSBzdGFydFgpICogMTtcblx0XHRcdHZhciB0b3RhbE1hcmdpbkxlZnQgPSBzY3JvbGxMZWZ0ICsgd2Fsa1g7XG5cdFx0XHRpZiAodG90YWxNYXJnaW5MZWZ0ID4gMCkge1xuXHRcdFx0XHR0b3RhbE1hcmdpbkxlZnQgPSAwO1xuXHRcdFx0XHRtZW51LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuY2xhc3MgKycuJysgYXBwLnRvcE5hdi5jb250cm9sLmJ1dHRvblByZXYuY2xhc3MpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1lbnUucXVlcnlTZWxlY3RvcignLicrIGFwcC50b3BOYXYuY29udHJvbC5jbGFzcyArJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuYnV0dG9uUHJldi5jbGFzcykuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRvdGFsTWFyZ2luTGVmdCA8PSBtYXhTY3JvbGwpIHtcblx0XHRcdFx0dG90YWxNYXJnaW5MZWZ0ID0gbWF4U2Nyb2xsO1xuXHRcdFx0XHRtZW51LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuY2xhc3MgKycuJysgYXBwLnRvcE5hdi5jb250cm9sLmJ1dHRvbk5leHQuY2xhc3MpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1lbnUucXVlcnlTZWxlY3RvcignLicrIGFwcC50b3BOYXYuY29udHJvbC5jbGFzcyArJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuYnV0dG9uTmV4dC5jbGFzcykuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG1lbnVXaWR0aCA8IHdpbmRvdy5pbm5lcldpZHRoKSB7XG5cdFx0XHRcdG1lbnUucXVlcnlTZWxlY3RvcignLicrIGFwcC50b3BOYXYuY29udHJvbC5jbGFzcyArJy4nKyBhcHAudG9wTmF2LmNvbnRyb2wuYnV0dG9uUHJldi5jbGFzcykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG1heFNjcm9sbCA+IDApIHtcblx0XHRcdFx0bWVudS5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnRvcE5hdi5jb250cm9sLmNsYXNzICsnLicrIGFwcC50b3BOYXYuY29udHJvbC5idXR0b25OZXh0LmNsYXNzKS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG5cdFx0XHR9XG5cdFx0XHRtZW51LnN0eWxlLm1hcmdpbkxlZnQgPSB0b3RhbE1hcmdpbkxlZnQgKyAncHgnO1xuXHRcdH0pO1xuXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICgpID0+IHtcblx0XHRcdG1vdXNlRG93biA9IGZhbHNlO1xuXHRcdH0pO1xuXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoKSA9PiB7XG5cdFx0XHRtb3VzZURvd24gPSBmYWxzZTtcblx0XHR9KTtcblx0fVxuXG5cdGVuYWJsZUZsdWlkQ29udGFpbmVyRHJhZygnLicrIGFwcC50b3BOYXYuY2xhc3MpO1xuXG59O1xuXG5cbi8qIDE0LiBIYW5kbGUgVG9wIE5hdiAtIFN1YiBNZW51IFRvZ2dsZVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgaGFuZGxlVG9wTmF2VG9nZ2xlID0gZnVuY3Rpb24obWVudXMsIGZvck1vYmlsZSA9IGZhbHNlKSB7XG5cdG1lbnVzLm1hcChmdW5jdGlvbihtZW51KSB7XG5cdFx0bWVudS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XG5cdFx0XHRpZiAoIWZvck1vYmlsZSB8fCAoZm9yTW9iaWxlICYmIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPCA3NjgpKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSB0aGlzLm5leHRFbGVtZW50U2libGluZztcblx0XHRcdFx0bWVudXMubWFwKGZ1bmN0aW9uKG0pIHtcblx0XHRcdFx0XHR2YXIgb3RoZXJUYXJnZXQgPSBtLm5leHRFbGVtZW50U2libGluZztcblx0XHRcdFx0XHRpZiAob3RoZXJUYXJnZXQgIT09IHRhcmdldCkge1xuXHRcdFx0XHRcdFx0c2xpZGVVcChvdGhlclRhcmdldCk7XG5cdFx0XHRcdFx0XHRvdGhlclRhcmdldC5jbG9zZXN0KCcuJysgYXBwLnRvcE5hdi5tZW51Lml0ZW1DbGFzcykuY2xhc3NMaXN0LnJlbW92ZShhcHAudG9wTmF2Lm1lbnUuZXhwYW5kQ2xhc3MpO1xuXHRcdFx0XHRcdFx0b3RoZXJUYXJnZXQuY2xvc2VzdCgnLicrIGFwcC50b3BOYXYubWVudS5pdGVtQ2xhc3MpLmNsYXNzTGlzdC5hZGQoYXBwLnRvcE5hdi5tZW51LmNsb3NlZENsYXNzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHRcdHNsaWRlVG9nZ2xlKHRhcmdldCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn07XG52YXIgaGFuZGxlVG9wTmF2U3ViTWVudSA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBtZW51QmFzZVNlbGVjdG9yID0gJy4nKyBhcHAudG9wTmF2LmNsYXNzICsnIC4nKyBhcHAudG9wTmF2Lm1lbnUuY2xhc3MgKycgPiAuJysgYXBwLnRvcE5hdi5tZW51Lml0ZW1DbGFzcyArJy4nKyBhcHAudG9wTmF2Lm1lbnUuaGFzU3ViQ2xhc3M7XG5cdHZhciBzdWJtZW51QmFzZVNlbGVjdG9yID0gJyA+IC4nKyBhcHAudG9wTmF2Lm1lbnUuc3VibWVudS5jbGFzcyArJyA+IC4nKyBhcHAudG9wTmF2Lm1lbnUuaXRlbUNsYXNzICsgJy4nICsgYXBwLnRvcE5hdi5tZW51Lmhhc1N1YkNsYXNzO1xuXHRcblx0Ly8gMTQuMSBNZW51IC0gVG9nZ2xlIC8gQ29sbGFwc2Vcblx0dmFyIG1lbnVMaW5rU2VsZWN0b3IgPSAgbWVudUJhc2VTZWxlY3RvciArICcgPiAuJysgYXBwLnRvcE5hdi5tZW51Lml0ZW1MaW5rQ2xhc3M7XG5cdHZhciBtZW51cyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChtZW51TGlua1NlbGVjdG9yKSk7XG5cdGhhbmRsZVRvcE5hdlRvZ2dsZShtZW51cywgdHJ1ZSk7XG5cdFxuXHQvLyAxNC4yIE1lbnUgLSBTdWJtZW51IGx2bCAxXG5cdHZhciBzdWJtZW51THZsMVNlbGVjdG9yID0gbWVudUJhc2VTZWxlY3RvciArIHN1Ym1lbnVCYXNlU2VsZWN0b3I7XG5cdHZhciBzdWJtZW51c0x2bDEgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc3VibWVudUx2bDFTZWxlY3RvciArICcgPiAuJyArIGFwcC50b3BOYXYubWVudS5pdGVtTGlua0NsYXNzKSk7XG5cdGhhbmRsZVRvcE5hdlRvZ2dsZShzdWJtZW51c0x2bDEpO1xuXHRcblx0Ly8gMTQuMyBzdWJtZW51IGx2bCAyXG5cdHZhciBzdWJtZW51THZsMlNlbGVjdG9yID0gbWVudUJhc2VTZWxlY3RvciArIHN1Ym1lbnVCYXNlU2VsZWN0b3IgKyBzdWJtZW51QmFzZVNlbGVjdG9yO1xuXHR2YXIgc3VibWVudXNMdmwyID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHN1Ym1lbnVMdmwyU2VsZWN0b3IgKyAnID4gLicgKyBhcHAudG9wTmF2Lm1lbnUuaXRlbUxpbmtDbGFzcykpO1xuXHRoYW5kbGVUb3BOYXZUb2dnbGUoc3VibWVudXNMdmwyKTtcblx0XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgZWxtcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicrIGFwcC50b3BOYXYuY2xhc3MgKyAnIC4nKyBhcHAudG9wTmF2Lm1lbnUuc3VibWVudS5jbGFzcykpO1xuXHRcdGVsbXMubWFwKGZ1bmN0aW9uKGVsbSkge1xuXHRcdFx0ZWxtLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcblx0XHR9KTtcblx0fSk7XG59O1xuXG5cbi8qIDE1LiBIYW5kbGUgVG9wIE5hdiAtIE1vYmlsZSBUb3AgTWVudSBUb2dnbGVcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVRvcE5hdk1vYmlsZVRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBlbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbJysgYXBwLnRvcE5hdi5tb2JpbGUudG9nZ2xlQXR0ciArJ10nKTtcblx0aWYgKGVsbSkge1xuXHRcdGVsbS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0c2xpZGVUb2dnbGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrIGFwcC50b3BOYXYuY2xhc3MpKTtcblx0XHR9XG5cdH1cblx0XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgZWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrIGFwcC50b3BOYXYuY2xhc3MpO1xuXHRcdGlmIChlbG0pIHtcblx0XHRcdGVsbS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG5cdFx0fVxuXHR9KTtcbn07XG5cblxuLyogMTYuIEFuaW1hdGlvbiAtIFNsaWRlIFVwXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBzbGlkZVVwID0gZnVuY3Rpb24oZWxtLCBkdXJhdGlvbiA9IGFwcC5hbmltYXRpb24uc3BlZWQpIHtcblx0aWYgKCFlbG0uY2xhc3NMaXN0LmNvbnRhaW5zKCd0cmFuc2l0aW9uaW5nJykpIHtcblx0XHRlbG0uY2xhc3NMaXN0LmFkZCgndHJhbnNpdGlvbmluZycpO1xuXHRcdGVsbS5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSAnaGVpZ2h0LCBtYXJnaW4sIHBhZGRpbmcnO1xuXHRcdGVsbS5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBkdXJhdGlvbiArICdtcyc7XG5cdFx0ZWxtLnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94Jztcblx0XHRlbG0uc3R5bGUuaGVpZ2h0ID0gZWxtLm9mZnNldEhlaWdodCArICdweCc7XG5cdFx0ZWxtLm9mZnNldEhlaWdodDtcblx0XHRlbG0uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblx0XHRlbG0uc3R5bGUuaGVpZ2h0ID0gMDtcblx0XHRlbG0uc3R5bGUucGFkZGluZ1RvcCA9IDA7XG5cdFx0ZWxtLnN0eWxlLnBhZGRpbmdCb3R0b20gPSAwO1xuXHRcdGVsbS5zdHlsZS5tYXJnaW5Ub3AgPSAwO1xuXHRcdGVsbS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAwO1xuXHRcdHdpbmRvdy5zZXRUaW1lb3V0KCAoKSA9PiB7XG5cdFx0XHRlbG0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdGVsbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnaGVpZ2h0Jyk7XG5cdFx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XG5cdFx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctYm90dG9tJyk7XG5cdFx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi10b3AnKTtcblx0XHRcdGVsbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xuXHRcdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xuXHRcdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLWR1cmF0aW9uJyk7XG5cdFx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcblx0XHRcdGVsbS5jbGFzc0xpc3QucmVtb3ZlKCd0cmFuc2l0aW9uaW5nJyk7XG5cdFx0fSwgZHVyYXRpb24pO1xuXHR9XG59O1xuXG5cbi8qIDE3LiBBbmltYXRpb24gLSBTbGlkZSBEb3duXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBzbGlkZURvd24gPSBmdW5jdGlvbihlbG0sIGR1cmF0aW9uID0gYXBwLmFuaW1hdGlvbi5zcGVlZCkge1xuXHRpZiAoIWVsbS5jbGFzc0xpc3QuY29udGFpbnMoJ3RyYW5zaXRpb25pbmcnKSkge1xuXHRcdGVsbS5jbGFzc0xpc3QuYWRkKCd0cmFuc2l0aW9uaW5nJyk7XG5cdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XG5cdFx0bGV0IGRpc3BsYXkgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbG0pLmRpc3BsYXk7XG5cdFx0aWYgKGRpc3BsYXkgPT09ICdub25lJykgZGlzcGxheSA9ICdibG9jayc7XG5cdFx0ZWxtLnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuXHRcdGxldCBoZWlnaHQgPSBlbG0ub2Zmc2V0SGVpZ2h0O1xuXHRcdGVsbS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXHRcdGVsbS5zdHlsZS5oZWlnaHQgPSAwO1xuXHRcdGVsbS5zdHlsZS5wYWRkaW5nVG9wID0gMDtcblx0XHRlbG0uc3R5bGUucGFkZGluZ0JvdHRvbSA9IDA7XG5cdFx0ZWxtLnN0eWxlLm1hcmdpblRvcCA9IDA7XG5cdFx0ZWxtLnN0eWxlLm1hcmdpbkJvdHRvbSA9IDA7XG5cdFx0ZWxtLm9mZnNldEhlaWdodDtcblx0XHRlbG0uc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnO1xuXHRcdGVsbS5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSBcImhlaWdodCwgbWFyZ2luLCBwYWRkaW5nXCI7XG5cdFx0ZWxtLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGR1cmF0aW9uICsgJ21zJztcblx0XHRlbG0uc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4Jztcblx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XG5cdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLWJvdHRvbScpO1xuXHRcdGVsbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLXRvcCcpO1xuXHRcdGVsbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xuXHRcdHdpbmRvdy5zZXRUaW1lb3V0KCAoKSA9PiB7XG5cdFx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2hlaWdodCcpO1xuXHRcdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xuXHRcdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLWR1cmF0aW9uJyk7XG5cdFx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcblx0XHRcdGVsbS5jbGFzc0xpc3QucmVtb3ZlKCd0cmFuc2l0aW9uaW5nJyk7XG5cdFx0fSwgZHVyYXRpb24pO1xuXHR9XG59O1xuXG5cbi8qIDE4LiBBbmltYXRpb24gLSBTbGlkZSBUb2dnbGVcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIHNsaWRlVG9nZ2xlID0gZnVuY3Rpb24oZWxtLCBkdXJhdGlvbiA9IGFwcC5hbmltYXRpb24uc3BlZWQpIHtcblx0aWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsbSkuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG5cdFx0cmV0dXJuIHNsaWRlRG93bihlbG0sIGR1cmF0aW9uKTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gc2xpZGVVcChlbG0sIGR1cmF0aW9uKTtcblx0fVxufTtcblxuXG4vKiAxOS4gQXBwbGljYXRpb24gQ29udHJvbGxlclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgQXBwID0gZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHJldHVybiB7XG5cdFx0Ly9tYWluIGZ1bmN0aW9uXG5cdFx0aW5pdDogZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhpcy5pbml0Q29tcG9uZW50KCk7XG5cdFx0XHR0aGlzLmluaXRTaWRlYmFyKCk7XG5cdFx0XHR0aGlzLmluaXRUb3BOYXYoKTtcblx0XHRcdHRoaXMuaW5pdEFwcExvYWQoKTtcblx0XHR9LFxuXHRcdGluaXRBcHBMb2FkOiBmdW5jdGlvbigpIHtcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QuYWRkKGFwcC5pbml0LmNsYXNzKTtcblx0XHR9LFxuXHRcdGluaXRTaWRlYmFyOiBmdW5jdGlvbigpIHtcblx0XHRcdGhhbmRsZVNpZGViYXJNZW51KCk7XG5cdFx0XHRoYW5kbGVTaWRlYmFyU2Nyb2xsTWVtb3J5KCk7XG5cdFx0fSxcblx0XHRpbml0VG9wTmF2OiBmdW5jdGlvbigpIHtcblx0XHRcdGhhbmRsZVVubGltaXRlZFRvcE5hdlJlbmRlcigpO1xuXHRcdFx0aGFuZGxlVG9wTmF2U3ViTWVudSgpO1xuXHRcdFx0aGFuZGxlVG9wTmF2TW9iaWxlVG9nZ2xlKCk7XG5cdFx0fSxcblx0XHRpbml0Q29tcG9uZW50OiBmdW5jdGlvbigpIHtcblx0XHRcdGhhbmRsZVNjcm9sbGJhcigpO1xuXHRcdFx0aGFuZGxlU2Nyb2xsVG9Ub3BCdXR0b24oKTtcblx0XHRcdGhhbmRsZVNjcm9sbFRvKCk7XG5cdFx0XHRoYW5kbGVDYXJkQWN0aW9uKCk7XG5cdFx0XHRoYW5kZWxUb29sdGlwUG9wb3ZlckFjdGl2YXRpb24oKTtcblx0XHRcdGhhbmRsZVRvZ2dsZUNsYXNzKCk7XG5cdFx0XHRoYW5kbGVUaGVtZVBhbmVsKCk7XG5cdFx0XHRoYW5kbGVDc3NWYXJpYWJsZSgpO1xuXHRcdH0sXG5cdFx0c2Nyb2xsVG9wOiBmdW5jdGlvbigpIHtcblx0XHRcdHdpbmRvdy5zY3JvbGxUbyh7dG9wOiAwLCBiZWhhdmlvcjogJ3Ntb290aCd9KTtcblx0XHR9XG5cdH07XG59KCk7XG5cblxuXG4vKiAxNC4gSW5pdGlhbGlzZVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdEFwcC5pbml0KCk7XG59KTsiXX0=
